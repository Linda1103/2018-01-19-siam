---
title: "Introduction to R Programming"
author: |
  | Wenjie Wang
  | Department of Statistics, UConn
date: January 19, 2018
---


## Getting Started

- slides available at [wenjie-stat.me/2018-01-19-siam/][slides]

- source code of the slides and all the examples:
  [https://github.com/wenjie2wang/2018-01-19-siam/][source-repo]

- Prerequisites: [R][cran] and possibly the [RStudio IDE][rstudio-ide] have
  been installed.


## Outline

- R Basics

- graphics

- debugging tools and exception handling

- performance and profiling

- dynamic reporting with R

- Shiny applications


## What is R?

- R is a freely available language for statistical computing and graphics (and
  more).

- homepage: https://www.r-project.org

- the Comprehensive R Archive Network (CRAN): https://cran.r-project.org

- FAQ: https://CRAN.R-project.org/doc/FAQ/R-FAQ.html


## Why R?

> - open source (free software)

> - runs on every major operating system

> - lightweight (compared with commerical software such as MATLAB, SAS)

> - frequent releases (active development)

> - fantastic package ecosystem (> 12,000 packages available on CRAN now)

> - easy to get started (with some programming experience of MATLAB, C++,
    Python, etc.)

> - ...


## Setting up

- editors
  - RStudio IDE (probably the most popular choice)
  - [Emacs][emacs] + [ESS][ess] (Emacs Speaks Statistics)
  - other alternatives: Notepad++/NppToR, Eclipse/StatET, Vim, ...


- A list of R packages needed is given below.

```{r pkgs-slides, eval = FALSE}
## for reproducing the slides
install.packages("revealjs")
## for following examples
install.packages(c("bookdown", "data.table", "dplyr", "ggplot2",
                   "microbenchmark", "plotly", "profvis", "RCpp", "shiny"))
```

## Getting help

- `help()` or `?` for getting help on a specific topic (usually a function
  name) or package.
  ```r
  ?help                         # details on using the `help` function
  help(package = "stats")       # information about the stats package
  ```

- `help.search()` or `??` for fuzzy (local) search.
  ```r
  ??splines                     # search "splines"
  help.search("row mean")       # search "row mean"
  ```

- `RSiteSearch()`: http://search.r-project.org

- Google, or your favorite searching engine

- StackOverflow: http://stackoverflow.com/tags/r


## Simple calculations

- use R as a calculator (`?Arithmetic`)
- assignment by `<-` or `=`
- `:` (colon operator) for generating regular sequences
- indexing and subsetting by `[]` for vectors
- `c()` for combining/concatenating vectors

```r
x = (1 + 2) * 3 / 4                   # x = 2.25
x ^ 2                                 # 5.0625
x %% 2                                # 0.25
x %/% 2                               # 1
y <- 4:1 - 1                          # y = (3, 2, 1, 0)
log(y)                                # (1.099, 0.693, 0.000, -âˆž)
y[1]                                  # 3
y[c(1, 2)]                            # (3, 2)
y[-1]                                 # (2, 1, 0)
y[-c(2, 3)]                           # (3, 0)
c(x, y)                               # (2.25, 3, 2, 1, 0)
c(exp(1), pi)                         # (2.718282, 3.141593)
```


## Base data structures

|    | Homogeneous   | Heterogeneous |
|----|---------------|---------------|
| 1d | Atomic vector | List          |
| 2d | Matrix        | Data frame    |
| nd | Array         |               |

- R does not have scalar types.

- Almost all other objects are built upon these foundations.

- `str()` (short for *structure*) gives a compact, human readable description of
  any R data structure.


## Atomic vectors

- Four common types of atomic vectors are logical, integer, double (often called
  numeric), and character.

```r
dbl_var <- c(1, 2.5, 4.5)                 # double
int_var <- c(1L, 6L, 10L)                 # integer (with `L` suffix)
log_var <- c(TRUE, FALSE, T, F)           # logical (avoid using `T`, `F`)
chr_var <- c("these are", "some strings") # character
```

- `NA`: Not Available/missing values
- `NaN`: Not a Number
- `NULL`: The null object


```r
is.na(c(NA, NaN))                         # (TRUE, TRUE)
is.nan(c(NA, NaN))                        # (FALSE, TRUE)
is.null(NA)                               # FALSE
is.null(NaN)                              # FALSE
is.null(NULL)                             # TRUE
```

---

Some useful operators and functions for atomic vectors:

```r
length(), names(), setNames(), %in%, match(),
rep(), rep.int(), rep_len(),
seq(), seq.int(), seq_len(), seq.along(),
rev(), head(), tail(), paste(), paste0()
typeof(), is.character(), as.character(), is.numeric(), as.numeric()
is.logical(), as.logical(), ...
```

e.g.

```r
x <- 1:3                         # (1, 2, 3)
length(x)                        # 3
names(x) <- letters[x]           # add names to x: "a", "b", and "c"
y <- setNames(x, LETTERS[x])     # (1, 2, 3) with names "A", "B", and "C"
names(y)                         # "A", "B", and "C"
y["A"]                           # 1 with name "A"
head(y, 2)                       # (1, 2) with names "A", "B"
head(y, - 1)                     # the same with `head(y, 2)`
y[c("B", "C")] <- c(4, 6)        # y = (1, 4, 6) with names "A", "B", "C"
rev(y)                           # (4, 2, 1) with names "C", "B", and "A"
c("A", "B") %in% names(y)        # (TRUE, TRUE)
z <- rep(letters[x], x)          # z = ("a", "b", "b", "c", "c", "c")
paste0(z, 1:6)                   # "a1", "b2", "b3", "c4", "c5", and "c6"
```

---

```r
## Basic math functions
abs(), sign()
sin(), cos(), tan()
acos(), asin(), atan(), atan2()
ceiling(), floor(), round(), trunc(), signif()
exp(), log(), log10(), log2(), sqrt()
choose(), factorial(), combn()
union(), intersect(), setdiff(), setequal()
sum(), prod(), max(), min(), pmax(), pmin()
cummax(), cummin(), cumprod(), cumsum(), diff()
mean(), median(), cor(), sd(), var(), range()
```

```r
## Ordering and tabulating
duplicated(), unique()
sort(), order(), rank(), quantile()
rle(), table(), xtabs(), split(), cut()
```

```r
## Random variables
(d, p, q, r) + (beta, binom, cauchy, chisq, exp, f, gamma, geom,
    hyper, lnorm, logis, multinom, nbinom, norm, pois, signrank, t,
    unif, weibull, wilcox, birthday, tukey)
```

e.g. `rnrom()` for generating random numbers following normal distribution.


## Matrices and arrays

```r
a <- matrix(1:6, ncol = 3)        # a 2 x 3 matrix, from 1 to 6 by columns
dim(a)                            # (2, 3)
a[1, ]                            # the first row
a[, 2]                            # the second column
a[1, 1:2]                         # the first two entries at the first row
b <- array(1:12, c(2, 3, 2))      # a 2 x 3 x 2 array
dim(b)                            # (2, 3, 2)
```

Some useful functions and operators:

```r
dim(), ncol(), NCOL(), nrow(), NROW()
cbind(), rbind()
names(), colnames(), rownames(), dimnames()
t(), aperm(), diag(), sweep()
rowSums(), colSums(), rowMeans(), colMeans()
as.matrix(), data.matrix()
crossprod(), tcrossprod()
%*%, %o%, outer()
eigen(), qr(), svd(), rcond(), solve()
```

## Data frames

```{r}
dat <- data.frame(x = 1:3, y = c("a", "b", "c"))
dat$z <- as.character(dat$x + 10)
dat$fac_z <- factor(dat$z)
str(dat)
```

- Factors: integer vectors with attribute `class` and `levels`
   - related functions: `factor()`, `gl()`, `levels()`, `relevel()`,
     `as.factor()`, `is.factor()`

- Let `stringsAsFactors = FALSE` when creating data frame or set
  `options(stringsAsFactors = FALSE)` globally for not converting character
  strings as factors.


## Lists

```{r}
x <- list(1:3, "a", c(TRUE, FALSE, TRUE), c(2.3, 5.9))
names(x) <- c("foo", "bar", "alpha", "beta")
str(x)
y <- list(x, sum)
str(y)
y[[2]](1:10)
```

---

```{r}
z <- list(list(list()))
str(z)
```

Some commonly used functions for data frames and lists:

```r
list(), unlist()
data.frame(), as.data.frame()
names(), colnames(), rownames()
$, [[, [,
length(), head(), tail()
table(), xtabs(), ftable()
expand.grid()
do.call(), subset()
by(), aggregate()
with()
```

## Functions

- placeholder


## Add-on packages

- Too many packages? check out the task view: http://cran.rstudio.com/web/views/


## Some Reference

- placeholder



## Thanks!

- https://wenjie-stat.me
- https://github.com/wenjie2wang/
- wenjie.2.wang@uconn.edu

[slides]: https://wenjie-stat.me/2018-01-19-siam/
[source-repo]: https://github.com/wenjie2wang/2018-01-19-siam/
[cran]: https://cran.r-project.org
[rstudio-ide]: https://www.rstudio.com/products/RStudio/#Desktop
[emacs]: https://www.gnu.org/software/emacs/
[ess]: https://ess.r-project.org/
