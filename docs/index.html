<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="dcterms.date" content="2018-01-19" />
  <title>Introduction to R Programming</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/reveal.js-3.3.0.1/css/reveal.css"/>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="index_files/reveal.js-3.3.0.1/css/theme/white.css" id="theme">


  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }


  </style>

    <style type="text/css">code{white-space: pre;}</style>

    <link rel="stylesheet" href="www/css/styles.css"/>

<!-- Printing and PDF exports -->
<script id="paper-css" type="application/dynamic-css">

/* Default Print Stylesheet Template
   by Rob Glazebrook of CSSnewbie.com
   Last Updated: June 4, 2008

   Feel free (nay, compelled) to edit, append, and
   manipulate this file as you see fit. */


@media print {

	/* SECTION 1: Set default width, margin, float, and
	   background. This prevents elements from extending
	   beyond the edge of the printed page, and prevents
	   unnecessary background images from printing */
	html {
		background: #fff;
		width: auto;
		height: auto;
		overflow: visible;
	}
	body {
		background: #fff;
		font-size: 20pt;
		width: auto;
		height: auto;
		border: 0;
		margin: 0 5%;
		padding: 0;
		overflow: visible;
		float: none !important;
	}

	/* SECTION 2: Remove any elements not needed in print.
	   This would include navigation, ads, sidebars, etc. */
	.nestedarrow,
	.controls,
	.fork-reveal,
	.share-reveal,
	.state-background,
	.reveal .progress,
	.reveal .backgrounds {
		display: none !important;
	}

	/* SECTION 3: Set body font face, size, and color.
	   Consider using a serif font for readability. */
	body, p, td, li, div {
		font-size: 20pt!important;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		color: #000;
	}

	/* SECTION 4: Set heading font face, sizes, and color.
	   Differentiate your headings from your body text.
	   Perhaps use a large sans-serif for distinction. */
	h1,h2,h3,h4,h5,h6 {
		color: #000!important;
		height: auto;
		line-height: normal;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		text-shadow: 0 0 0 #000 !important;
		text-align: left;
		letter-spacing: normal;
	}
	/* Need to reduce the size of the fonts for printing */
	h1 { font-size: 28pt !important;  }
	h2 { font-size: 24pt !important; }
	h3 { font-size: 22pt !important; }
	h4 { font-size: 22pt !important; font-variant: small-caps; }
	h5 { font-size: 21pt !important; }
	h6 { font-size: 20pt !important; font-style: italic; }

	/* SECTION 5: Make hyperlinks more usable.
	   Ensure links are underlined, and consider appending
	   the URL to the end of the link for usability. */
	a:link,
	a:visited {
		color: #000 !important;
		font-weight: bold;
		text-decoration: underline;
	}
	/*
	.reveal a:link:after,
	.reveal a:visited:after {
		content: " (" attr(href) ") ";
		color: #222 !important;
		font-size: 90%;
	}
	*/


	/* SECTION 6: more reveal.js specific additions by @skypanther */
	ul, ol, div, p {
		visibility: visible;
		position: static;
		width: auto;
		height: auto;
		display: block;
		overflow: visible;
		margin: 0;
		text-align: left !important;
	}
	.reveal pre,
	.reveal table {
		margin-left: 0;
		margin-right: 0;
	}
	.reveal pre code {
		padding: 20px;
		border: 1px solid #ddd;
	}
	.reveal blockquote {
		margin: 20px 0;
	}
	.reveal .slides {
		position: static !important;
		width: auto !important;
		height: auto !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 0 !important;
		zoom: 1 !important;

		overflow: visible !important;
		display: block !important;

		text-align: left !important;
		-webkit-perspective: none;
		   -moz-perspective: none;
		    -ms-perspective: none;
		        perspective: none;

		-webkit-perspective-origin: 50% 50%;
		   -moz-perspective-origin: 50% 50%;
		    -ms-perspective-origin: 50% 50%;
		        perspective-origin: 50% 50%;
	}
	.reveal .slides section {
		visibility: visible !important;
		position: static !important;
		width: auto !important;
		height: auto !important;
		display: block !important;
		overflow: visible !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 60px 20px !important;
		z-index: auto !important;

		opacity: 1 !important;

		page-break-after: always !important;

		-webkit-transform-style: flat !important;
		   -moz-transform-style: flat !important;
		    -ms-transform-style: flat !important;
		        transform-style: flat !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;

		-webkit-transition: none !important;
		   -moz-transition: none !important;
		    -ms-transition: none !important;
		        transition: none !important;
	}
	.reveal .slides section.stack {
		padding: 0 !important;
	}
	.reveal section:last-of-type {
		page-break-after: avoid !important;
	}
	.reveal section .fragment {
		opacity: 1 !important;
		visibility: visible !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;
	}
	.reveal section img {
		display: block;
		margin: 15px 0px;
		background: rgba(255,255,255,1);
		border: 1px solid #666;
		box-shadow: none;
	}

	.reveal section small {
		font-size: 0.8em;
	}

}  
</script>


<script id="pdf-css" type="application/dynamic-css">
    
/**
 * This stylesheet is used to print reveal.js
 * presentations to PDF.
 *
 * https://github.com/hakimel/reveal.js#pdf-export
 */

* {
	-webkit-print-color-adjust: exact;
}

body {
	margin: 0 auto !important;
	border: 0;
	padding: 0;
	float: none !important;
	overflow: visible;
}

html {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Remove any elements not needed in print. */
.nestedarrow,
.reveal .controls,
.reveal .progress,
.reveal .playback,
.reveal.overview,
.fork-reveal,
.share-reveal,
.state-background {
	display: none !important;
}

h1, h2, h3, h4, h5, h6 {
	text-shadow: 0 0 0 #000 !important;
}

.reveal pre code {
	overflow: hidden !important;
	font-family: Courier, 'Courier New', monospace !important;
}

ul, ol, div, p {
	visibility: visible;
	position: static;
	width: auto;
	height: auto;
	display: block;
	overflow: visible;
	margin: auto;
}
.reveal {
	width: auto !important;
	height: auto !important;
	overflow: hidden !important;
}
.reveal .slides {
	position: static;
	width: 100%;
	height: auto;

	left: auto;
	top: auto;
	margin: 0 !important;
	padding: 0 !important;

	overflow: visible;
	display: block;

	-webkit-perspective: none;
	   -moz-perspective: none;
	    -ms-perspective: none;
	        perspective: none;

	-webkit-perspective-origin: 50% 50%; /* there isn't a none/auto value but 50-50 is the default */
	   -moz-perspective-origin: 50% 50%;
	    -ms-perspective-origin: 50% 50%;
	        perspective-origin: 50% 50%;
}

.reveal .slides section {
	page-break-after: always !important;

	visibility: visible !important;
	position: relative !important;
	display: block !important;
	position: relative !important;

	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	min-height: 1px;

	opacity: 1 !important;

	-webkit-transform-style: flat !important;
	   -moz-transform-style: flat !important;
	    -ms-transform-style: flat !important;
	        transform-style: flat !important;

	-webkit-transform: none !important;
	   -moz-transform: none !important;
	    -ms-transform: none !important;
	        transform: none !important;
}

.reveal section.stack {
	margin: 0 !important;
	padding: 0 !important;
	page-break-after: avoid !important;
	height: auto !important;
	min-height: auto !important;
}

.reveal img {
	box-shadow: none;
}

.reveal .roll {
	overflow: visible;
	line-height: 1em;
}

/* Slide backgrounds are placed inside of their slide when exporting to PDF */
.reveal section .slide-background {
	display: block !important;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: -1;
}

/* All elements should be above the slide-background */
.reveal section>* {
	position: relative;
	z-index: 1;
}

/* Display slide speaker notes when 'showNotes' is enabled */
.reveal .speaker-notes-pdf {
	display: block;
	width: 100%;
	max-height: none;
	left: auto;
	top: auto;
	z-index: 100;
}

/* Display slide numbers when 'slideNumber' is enabled */
.reveal .slide-number-pdf {
	display: block;
	position: absolute;
	font-size: 14px;
}

</script>


<script>
var style = document.createElement( 'style' );
style.type = 'text/css';
var style_script_id = window.location.search.match( /print-pdf/gi ) ? 'pdf-css' : 'paper-css';
var style_script = document.getElementById(style_script_id).text;
style.innerHTML = style_script;
document.getElementsByTagName('head')[0].appendChild(style);
</script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">Introduction to R Programming</h1>
  <h1 class="subtitle">Part I</h1>
    <h2 class="author"><div class="line-block">Wenjie Wang<br />
Department of Statistics, UConn</div></h2>
    <h3 class="date">January 19, 2018</h3>
</section>

<section id="getting-started" class="slide level2">
<h2>Getting Started</h2>
<ul>
<li><p>slides available at <a href="https://wenjie-stat.me/2018-01-19-siam/">wenjie-stat.me/2018-01-19-siam/</a></p></li>
<li><p>source code of the slides and all the examples: <a href="https://github.com/wenjie2wang/2018-01-19-siam/" class="uri">https://github.com/wenjie2wang/2018-01-19-siam/</a></p></li>
<li><p>prerequisites: <a href="https://cran.r-project.org">R</a> and possibly the <a href="https://www.rstudio.com/products/RStudio/#Desktop">RStudio IDE</a> have been installed.</p></li>
</ul>
</section>
<section id="outline" class="slide level2">
<h2>Outline</h2>
<ul>
<li><p>R Basics</p></li>
<li><p>debugging tools and exception handling</p></li>
<li><p>performance and profiling</p></li>
<li><p>graphics in R</p></li>
<li><p>dynamic reporting with R Markdown</p></li>
<li><p>R Shiny applications</p></li>
</ul>
</section>
<section id="what-is-r" class="slide level2">
<h2>What is R?</h2>
<ul>
<li><p>R is a freely available language for statistical computing and graphics (and more).</p></li>
<li><p>homepage: <a href="https://www.r-project.org" class="uri">https://www.r-project.org</a></p></li>
<li><p>the Comprehensive R Archive Network (CRAN): <a href="https://cran.r-project.org" class="uri">https://cran.r-project.org</a></p></li>
<li><p>FAQ: <a href="https://CRAN.R-project.org/doc/FAQ/R-FAQ.html" class="uri">https://CRAN.R-project.org/doc/FAQ/R-FAQ.html</a></p></li>
</ul>
</section>
<section id="why-r" class="slide level2">
<h2>Why R?</h2>
<ul>
<li class="fragment">open source (free software)</li>
</ul>
<ul>
<li class="fragment">runs on every major operating system</li>
</ul>
<ul>
<li class="fragment">lightweight (compared with commerical software such as MATLAB, SAS)</li>
</ul>
<ul>
<li class="fragment">frequent releases (active development)</li>
</ul>
<ul>
<li class="fragment">fantastic package ecosystem (&gt; 12,000 packages available on CRAN now)</li>
</ul>
<ul>
<li class="fragment">easy to get started (with some programming experience of MATLAB, C++, Python, etc.)</li>
</ul>
<ul>
<li class="fragment">…</li>
</ul>
</section>
<section id="setting-up" class="slide level2">
<h2>Setting up</h2>
<ul>
<li>editors
<ul>
<li>RStudio IDE (probably the most popular choice)</li>
<li><a href="https://www.gnu.org/software/emacs/">Emacs</a> + <a href="https://ess.r-project.org/">ESS</a> (Emacs Speaks Statistics)</li>
<li>other alternatives: Notepad++/NppToR, StatET (R + Eclipse), Vim, …</li>
</ul></li>
<li>A list of R packages needed is given below.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">## for reproducing the slides</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">install.packages</span>(<span class="st">&quot;revealjs&quot;</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">## for following examples</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">install.packages</span>(</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">    <span class="kw">c</span>(<span class="st">&quot;bookdown&quot;</span>, <span class="st">&quot;data.table&quot;</span>, <span class="st">&quot;dplyr&quot;</span>, <span class="st">&quot;fortunes&quot;</span>, <span class="st">&quot;ggplot2&quot;</span>,</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">      <span class="st">&quot;microbenchmark&quot;</span>, <span class="st">&quot;plotly&quot;</span>, <span class="st">&quot;profvis&quot;</span>, <span class="st">&quot;Rcpp&quot;</span>, <span class="st">&quot;shiny&quot;</span>)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">)</a></code></pre></div>
</section>
<section id="getting-help" class="slide level2">
<h2>Getting help</h2>
<ul>
<li><p><code>help()</code> or <code>?</code> for getting help on a specific topic (usually a function name) or package.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">?help                         <span class="co"># details on using the `help` function</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">help</span>(<span class="dt">package =</span> <span class="st">&quot;stats&quot;</span>)       <span class="co"># information about the stats package</span></a></code></pre></div></li>
<li><p><code>help.search()</code> or <code>??</code> for fuzzy (local) search.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">??splines                     <span class="co"># search &quot;splines&quot;</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">help.search</span>(<span class="st">&quot;row mean&quot;</span>)       <span class="co"># search &quot;row mean&quot;</span></a></code></pre></div></li>
<li><p><code>RSiteSearch()</code>: <a href="http://search.r-project.org" class="uri">http://search.r-project.org</a></p></li>
<li><p>Google, or your favorite searching engine</p></li>
<li><p>StackOverflow: <a href="http://stackoverflow.com/tags/r" class="uri">http://stackoverflow.com/tags/r</a></p></li>
</ul>
</section>
<section id="simple-calculations" class="slide level2">
<h2>Simple calculations</h2>
<ul>
<li>use R as a calculator (<code>?Arithmetic</code>)</li>
<li>assignment by <code>&lt;-</code> or <code>=</code> (or <code>-&gt;</code>?)</li>
<li><code>:</code> (colon operator) for generating regular sequences</li>
<li>indexing and subsetting by <code>[]</code> for vectors</li>
<li><code>c()</code> for combining/concatenating vectors</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">x =<span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span>) <span class="op">*</span><span class="st"> </span><span class="dv">3</span> <span class="op">/</span><span class="st"> </span><span class="dv">4</span>                   <span class="co"># x = 2.25</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">x <span class="op">^</span><span class="st"> </span><span class="dv">2</span>                                 <span class="co"># 5.0625</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">x <span class="op">%%</span><span class="st"> </span><span class="dv">2</span>                                <span class="co"># 0.25</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">x <span class="op">%/%</span><span class="st"> </span><span class="dv">2</span>                               <span class="co"># 1</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">z &lt;-<span class="st"> </span>y &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="dv">1</span>                     <span class="co"># z = y = (3, 2, 1, 0)</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw">log</span>(y)                                <span class="co"># (1.099, 0.693, 0.000, -∞)</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">y[<span class="dv">1</span>]                                  <span class="co"># 3</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">y[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)]                            <span class="co"># (3, 2)</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9">y[<span class="op">-</span><span class="st"> </span><span class="dv">1</span>]                                <span class="co"># (2, 1, 0)</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10">y[<span class="op">-</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]                          <span class="co"># (3, 0)</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="kw">c</span>(x, y)                               <span class="co"># (2.25, 3, 2, 1, 0)</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="kw">c</span>(<span class="kw">exp</span>(<span class="dv">1</span>), pi)                         <span class="co"># (2.718282, 3.141593)</span></a></code></pre></div>
</section>
<section id="base-data-structures" class="slide level2">
<h2>Base data structures</h2>
<table>
<thead>
<tr class="header">
<th></th>
<th>Homogeneous</th>
<th>Heterogeneous</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1d</td>
<td>Atomic vector</td>
<td>List</td>
</tr>
<tr class="even">
<td>2d</td>
<td>Matrix</td>
<td>Data frame</td>
</tr>
<tr class="odd">
<td>nd</td>
<td>Array</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li><p>R does not have scalar types.</p></li>
<li><p>Almost all other objects are built upon these foundations.</p></li>
<li><p><code>str()</code> (short for <em>structure</em>) gives a compact, human readable description of any R data structure.</p></li>
</ul>
</section>
<section id="atomic-vectors" class="slide level2">
<h2>Atomic vectors</h2>
<ul>
<li>Four common types of atomic vectors are logical, integer, double (often called numeric), and character.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">dbl_var &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="fl">2.5</span>, <span class="fl">4.5</span>)                 <span class="co"># double</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">int_var &lt;-<span class="st"> </span><span class="kw">c</span>(1L, 6L, 10L)                 <span class="co"># integer (with `L` suffix)</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">log_var &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, T, F)           <span class="co"># logical (avoid using `T`, `F`)</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">chr_var &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;these are&quot;</span>, <span class="st">&quot;some strings&quot;</span>) <span class="co"># character</span></a></code></pre></div>
<ul>
<li><code>NA</code>: Not Available/missing values</li>
<li><code>NaN</code>: Not a Number</li>
<li><code>NULL</code>: The null object</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">is.na</span>(<span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NaN</span>))                         <span class="co"># (TRUE, TRUE)</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">is.nan</span>(<span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NaN</span>))                        <span class="co"># (FALSE, TRUE)</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw">is.null</span>(<span class="ot">NA</span>)                               <span class="co"># FALSE</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="kw">is.null</span>(<span class="ot">NaN</span>)                              <span class="co"># FALSE</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="kw">is.null</span>(<span class="ot">NULL</span>)                             <span class="co"># TRUE</span></a></code></pre></div>
</section>
<section class="slide level2">

<p>Some useful operators and functions for atomic vectors:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">c</span>(), <span class="kw">vector</span>(), <span class="kw">length</span>(), <span class="kw">names</span>(), <span class="kw">setNames</span>()</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">rep</span>(), <span class="kw">rep.int</span>(), <span class="kw">rep_len</span>(),</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="kw">seq</span>(), <span class="kw">seq.int</span>(), <span class="kw">seq_len</span>(), <span class="kw">seq.along</span>(),</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="op">%in%</span>, <span class="kw">match</span>(), <span class="kw">rev</span>(), <span class="kw">head</span>(), <span class="kw">tail</span>(), <span class="kw">paste</span>(), <span class="kw">paste0</span>()</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="kw">typeof</span>(), <span class="kw">is.character</span>(), <span class="kw">as.character</span>(), <span class="kw">is.numeric</span>(), <span class="kw">as.numeric</span>()</a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="kw">is.logical</span>(), <span class="kw">as.logical</span>(), ...</a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">## e.g.,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>                         <span class="co"># (1, 2, 3)</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw">length</span>(x)                        <span class="co"># 3</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="kw">names</span>(x) &lt;-<span class="st"> </span>letters[x]           <span class="co"># add names to x: &quot;a&quot;, &quot;b&quot;, and &quot;c&quot;</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5">y &lt;-<span class="st"> </span><span class="kw">setNames</span>(x, LETTERS[x])     <span class="co"># (1, 2, 3) with names &quot;A&quot;, &quot;B&quot;, and &quot;C&quot;</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="kw">names</span>(y)                         <span class="co"># &quot;A&quot;, &quot;B&quot;, and &quot;C&quot;</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7">y[<span class="st">&quot;A&quot;</span>]                           <span class="co"># 1 with name &quot;A&quot;</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="kw">head</span>(y, <span class="dv">2</span>)                       <span class="co"># (1, 2) with names &quot;A&quot;, &quot;B&quot;</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="kw">head</span>(y, <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)                     <span class="co"># the same with `head(y, 2)`</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10">y[<span class="kw">c</span>(<span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>)] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">6</span>)        <span class="co"># y = (1, 4, 6) with names &quot;A&quot;, &quot;B&quot;, &quot;C&quot;</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="kw">rev</span>(y)                           <span class="co"># (4, 2, 1) with names &quot;C&quot;, &quot;B&quot;, and &quot;A&quot;</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>) <span class="op">%in%</span><span class="st"> </span><span class="kw">names</span>(y)        <span class="co"># (TRUE, TRUE)</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13">z &lt;-<span class="st"> </span><span class="kw">rep</span>(letters[x], x)          <span class="co"># z = (&quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;c&quot;, &quot;c&quot;, &quot;c&quot;)</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="kw">paste0</span>(z, <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>)                   <span class="co"># &quot;a1&quot;, &quot;b2&quot;, &quot;b3&quot;, &quot;c4&quot;, &quot;c5&quot;, and &quot;c6&quot;</span></a></code></pre></div>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">## Basic math functions</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="kw">abs</span>(), <span class="kw">sign</span>()</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw">sin</span>(), <span class="kw">cos</span>(), <span class="kw">tan</span>()</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw">acos</span>(), <span class="kw">asin</span>(), <span class="kw">atan</span>(), <span class="kw">atan2</span>()</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw">ceiling</span>(), <span class="kw">floor</span>(), <span class="kw">round</span>(), <span class="kw">trunc</span>(), <span class="kw">signif</span>()</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="kw">exp</span>(), <span class="kw">log</span>(), <span class="kw">log10</span>(), <span class="kw">log2</span>(), <span class="kw">sqrt</span>()</a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="kw">choose</span>(), <span class="kw">factorial</span>(), <span class="kw">combn</span>()</a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="kw">union</span>(), <span class="kw">intersect</span>(), <span class="kw">setdiff</span>(), <span class="kw">setequal</span>()</a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="kw">sum</span>(), <span class="kw">prod</span>(), <span class="kw">max</span>(), <span class="kw">min</span>(), <span class="kw">pmax</span>(), <span class="kw">pmin</span>()</a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="kw">cummax</span>(), <span class="kw">cummin</span>(), <span class="kw">cumprod</span>(), <span class="kw">cumsum</span>(), <span class="kw">diff</span>()</a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="kw">mean</span>(), <span class="kw">median</span>(), <span class="kw">cor</span>(), <span class="kw">sd</span>(), <span class="kw">var</span>(), <span class="kw">range</span>()</a></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">## Ordering and tabulating</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw">duplicated</span>(), <span class="kw">unique</span>()</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">sort</span>(), <span class="kw">order</span>(), <span class="kw">rank</span>(), <span class="kw">quantile</span>()</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="kw">rle</span>(), <span class="kw">table</span>(), <span class="kw">xtabs</span>(), <span class="kw">split</span>(), <span class="kw">cut</span>()</a></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">## Random variables</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">(d, p, q, r) <span class="op">+</span><span class="st"> </span>(beta, binom, cauchy, chisq, exp, f, gamma, geom,</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">    hyper, lnorm, logis, multinom, nbinom, norm, pois, signrank, t,</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">    unif, weibull, wilcox, birthday, tukey)</a></code></pre></div>
<p>e.g., <code>rnorm()</code> for generating random numbers following normal distribution.</p>
</section>
<section id="matrices-and-arrays" class="slide level2">
<h2>Matrices and arrays</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">matrix</span>(LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>], <span class="dt">nrow =</span> <span class="dv">2</span>)  <span class="co"># 2 x 3 matrix (&quot;A&quot;-&quot;F&quot; by columns)</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">dim</span>(a)                               <span class="co"># (2, 3)</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3">a[<span class="dv">2</span>]                                 <span class="co"># &quot;B&quot;</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4">a[<span class="dv">1</span>, ]                               <span class="co"># the first row</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5">a[, <span class="dv">2</span>]                               <span class="co"># the second column</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6">a[<span class="dv">1</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]                            <span class="co"># &quot;A&quot; and &quot;C&quot;</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7">a[<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))]  <span class="co"># &quot;E&quot;, &quot;B&quot;, &quot;D&quot;</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8">b &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>))         <span class="co"># a 2 x 3 x 2 array</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="kw">dim</span>(b)                               <span class="co"># (2, 3, 2)</span></a></code></pre></div>
<p>Some useful functions and operators:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">dim</span>(), <span class="kw">ncol</span>(), <span class="kw">NCOL</span>(), <span class="kw">nrow</span>(), <span class="kw">NROW</span>()</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw">names</span>(), <span class="kw">colnames</span>(), <span class="kw">rownames</span>(), <span class="kw">dimnames</span>()</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw">cbind</span>(), <span class="kw">rbind</span>()</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="kw">t</span>(), <span class="kw">aperm</span>(), <span class="kw">diag</span>(), <span class="kw">sweep</span>()</a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="kw">rowSums</span>(), <span class="kw">colSums</span>(), <span class="kw">rowMeans</span>(), <span class="kw">colMeans</span>()</a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="kw">as.matrix</span>(), <span class="kw">data.matrix</span>()</a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="kw">crossprod</span>(), <span class="kw">tcrossprod</span>(), <span class="op">%*%</span>, <span class="op">%o%</span>, <span class="kw">outer</span>()</a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="kw">eigen</span>(), <span class="kw">qr</span>(), <span class="kw">svd</span>(), <span class="kw">rcond</span>(), <span class="kw">solve</span>()</a></code></pre></div>
</section>
<section id="data-frames" class="slide level2">
<h2>Data frames</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">dat<span class="op">$</span>z &lt;-<span class="st"> </span><span class="kw">as.character</span>(dat<span class="op">$</span>x <span class="op">+</span><span class="st"> </span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">dat<span class="op">$</span>fac_z &lt;-<span class="st"> </span><span class="kw">factor</span>(dat<span class="op">$</span>z)</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="kw">str</span>(dat)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    3 obs. of  4 variables:
##  $ x    : int  1 2 3
##  $ y    : Factor w/ 3 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;: 1 2 3
##  $ z    : chr  &quot;11&quot; &quot;12&quot; &quot;13&quot;
##  $ fac_z: Factor w/ 3 levels &quot;11&quot;,&quot;12&quot;,&quot;13&quot;: 1 2 3</code></pre>
<ul>
<li>Factors: integer vectors with attribute <code>class</code> and <code>levels</code>
<ul>
<li>related functions: <code>factor()</code>, <code>gl()</code>, <code>levels()</code>, <code>relevel()</code>, <code>as.factor()</code>, <code>is.factor()</code></li>
</ul></li>
<li>Let <code>stringsAsFactors = FALSE</code> when creating data frame or set <code>options(stringsAsFactors = FALSE)</code> globally for not converting character strings as factors.</li>
</ul>
</section>
<section id="lists" class="slide level2">
<h2>Lists</h2>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="st">&quot;a&quot;</span>, <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>), <span class="kw">c</span>(<span class="fl">2.3</span>, <span class="fl">5.9</span>))</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">names</span>(x) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;alpha&quot;</span>, <span class="st">&quot;beta&quot;</span>)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw">str</span>(x)</a></code></pre></div>
<pre><code>## List of 4
##  $ foo  : int [1:3] 1 2 3
##  $ bar  : chr &quot;a&quot;
##  $ alpha: logi [1:3] TRUE FALSE TRUE
##  $ beta : num [1:2] 2.3 5.9</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="kw">list</span>(x, sum)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw">str</span>(y)</a></code></pre></div>
<pre><code>## List of 2
##  $ :List of 4
##   ..$ foo  : int [1:3] 1 2 3
##   ..$ bar  : chr &quot;a&quot;
##   ..$ alpha: logi [1:3] TRUE FALSE TRUE
##   ..$ beta : num [1:2] 2.3 5.9
##  $ :function (..., na.rm = FALSE)</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">y[[<span class="dv">2</span>]](<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<pre><code>## [1] 55</code></pre>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">z &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">list</span>(<span class="kw">list</span>()))</a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="kw">str</span>(z)</a></code></pre></div>
<pre><code>## List of 1
##  $ :List of 1
##   ..$ : list()</code></pre>
<p>Some commonly used functions for data frames and lists:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">list</span>(), <span class="kw">unlist</span>()</a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="kw">data.frame</span>(), <span class="kw">as.data.frame</span>()</a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="kw">names</span>(), <span class="kw">colnames</span>(), <span class="kw">rownames</span>()</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="op">$</span>, [[, [,</a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="kw">length</span>(), <span class="kw">head</span>(), <span class="kw">tail</span>()</a>
<a class="sourceLine" id="cb24-6" data-line-number="6"><span class="kw">table</span>(), <span class="kw">xtabs</span>(), <span class="kw">ftable</span>()</a>
<a class="sourceLine" id="cb24-7" data-line-number="7"><span class="kw">with</span>()</a>
<a class="sourceLine" id="cb24-8" data-line-number="8"><span class="kw">expand.grid</span>()</a>
<a class="sourceLine" id="cb24-9" data-line-number="9"><span class="kw">subset</span>()</a>
<a class="sourceLine" id="cb24-10" data-line-number="10"><span class="kw">do.call</span>()</a>
<a class="sourceLine" id="cb24-11" data-line-number="11"><span class="kw">by</span>(), <span class="kw">aggregate</span>()</a>
<a class="sourceLine" id="cb24-12" data-line-number="12"><span class="kw">reshape</span>(), <span class="kw">merge</span>()</a></code></pre></div>
</section>
<section id="functions" class="slide level2">
<h2>Functions</h2>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">function_name &lt;-<span class="st"> </span><span class="cf">function</span>(arguments) {</a>
<a class="sourceLine" id="cb25-2" data-line-number="2"></a>
<a class="sourceLine" id="cb25-3" data-line-number="3">    ## do something interesting here</a>
<a class="sourceLine" id="cb25-4" data-line-number="4"></a>
<a class="sourceLine" id="cb25-5" data-line-number="5">    ## the last expression evaluated will be returned</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">    ## or explictly use return()</a>
<a class="sourceLine" id="cb25-7" data-line-number="7"></a>
<a class="sourceLine" id="cb25-8" data-line-number="8">}</a></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">## e.g.,</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">foo &lt;-<span class="st"> </span><span class="cf">function</span>(x) x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3">bar &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">y =</span> <span class="st">&quot;alpha&quot;</span>) {</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">    x &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb26-5" data-line-number="5">    <span class="kw">list</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)</a>
<a class="sourceLine" id="cb26-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="st">`</span><span class="dt">%+%</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="cf">function</span>(e1, e2) <span class="kw">paste0</span>(e1, e2)</a>
<a class="sourceLine" id="cb26-8" data-line-number="8"><span class="st">&quot;foo&quot;</span> <span class="op">%+%</span><span class="st"> &quot;bar&quot;</span></a></code></pre></div>
<pre><code>## [1] &quot;foobar&quot;</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">rm</span>(<span class="st">&quot;%+%&quot;</span>)               <span class="co"># remove it for using ggplot2 later</span></a></code></pre></div>
</section>
<section id="lazy-evaluation" class="slide level2">
<h2>Lazy evaluation</h2>
<ul>
<li>Arguments to functions are evaluated <em>lazily</em> (only as needed).</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) {</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">    a <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb29-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb29-4" data-line-number="4"><span class="kw">f</span>(<span class="dv">2</span>)                    <span class="co"># without any error/warning/message</span></a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) {</a>
<a class="sourceLine" id="cb31-2" data-line-number="2">    <span class="kw">return</span>(a <span class="op">+</span><span class="st"> </span>b)</a>
<a class="sourceLine" id="cb31-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb31-4" data-line-number="4"><span class="kw">f</span>(<span class="dv">2</span>)                     <span class="co"># error: argument &quot;b&quot; is missing, with no default</span></a></code></pre></div>
</section>
<section id="the-...-ellipsis-argument" class="slide level2">
<h2>The <code>...</code> (ellipsis) argument</h2>
<ul>
<li>a “placeholder” for possibly a number of arguments that may passed on to other functions</li>
<li>can be left unspecified</li>
</ul>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">my_plot &lt;-<span class="st"> </span><span class="cf">function</span>(x, y, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>, ...) {</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">    <span class="kw">plot</span>(x, y, <span class="dt">type =</span> type, ...)</a>
<a class="sourceLine" id="cb32-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb32-4" data-line-number="4">## the first function call leads to the second one</a>
<a class="sourceLine" id="cb32-5" data-line-number="5"><span class="kw">my_plot</span>(x, y, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb32-6" data-line-number="6"><span class="kw">plot</span>(x, y, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</a></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) <span class="kw">list</span>(...)</a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="kw">str</span>(<span class="kw">f</span>(<span class="dv">1</span>, <span class="dt">a =</span> <span class="st">&quot;alpha&quot;</span>, <span class="dt">b =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<pre><code>## List of 2
##  $ a: chr &quot;alpha&quot;
##  $ b: logi TRUE</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="kw">f</span>()</a></code></pre></div>
<pre><code>## list()</code></pre>
</section>
<section class="slide level2">

<ul>
<li>The <code>...</code> is also useful when the number of arguments passed to the function cannot be known in advance.</li>
</ul>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw">str</span>(paste)</a></code></pre></div>
<pre><code>## function (..., sep = &quot; &quot;, collapse = NULL)</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="kw">str</span>(cat)</a></code></pre></div>
<pre><code>## function (..., file = &quot;&quot;, sep = &quot; &quot;, fill = FALSE, labels = NULL, append = FALSE)</code></pre>
<ul>
<li>All the arguments that appears after the <code>...</code> in the argument list has to be specified explicitly by the names (cannot be partially matched).</li>
</ul>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="kw">paste</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>], <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>), <span class="dt">sep =</span> <span class="st">&quot; = &quot;</span>, <span class="dt">collapse =</span> <span class="st">&quot;, &quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;a = 2, b = 4, c = 5&quot;</code></pre>
</section>
<section id="lexical-scoping" class="slide level2">
<h2>Lexical scoping</h2>
<ul>
<li>How does R look up the value of a symbol?</li>
<li>The scoping rules determine how a value is associated with a free variable in a function.</li>
</ul>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</a>
<a class="sourceLine" id="cb43-2" data-line-number="2">    x <span class="op">*</span><span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span>y <span class="op">/</span><span class="st"> </span>z                       <span class="co"># z is called a free variable</span></a>
<a class="sourceLine" id="cb43-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb43-4" data-line-number="4">z &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb43-5" data-line-number="5"><span class="kw">f</span>(<span class="dv">1</span>, <span class="dv">20</span>)</a></code></pre></div>
<pre><code>## [1] 5</code></pre>
<ul>
<li>The values of free variables are first searched for in the environment where the function was defined.</li>
<li>What is an environment?
<ul>
<li>a collection of symbol and value pairs</li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>Every environment has a parent environment except the empty environment.</p></li>
<li><p>Things get really interesting when we define a function inside another function.</p></li>
</ul>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">power &lt;-<span class="st"> </span><span class="cf">function</span>(pow) {</a>
<a class="sourceLine" id="cb45-2" data-line-number="2">    <span class="cf">function</span>(x) x <span class="op">^</span><span class="st"> </span>pow</a>
<a class="sourceLine" id="cb45-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb45-4" data-line-number="4">square &lt;-<span class="st"> </span><span class="kw">power</span>(<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb45-5" data-line-number="5"><span class="kw">square</span>(<span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">cube &lt;-<span class="st"> </span><span class="kw">power</span>(<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb47-2" data-line-number="2"><span class="kw">cube</span>(<span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] 8</code></pre>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="kw">ls</span>(<span class="kw">environment</span>(square))</a></code></pre></div>
<pre><code>## [1] &quot;pow&quot;</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="kw">get</span>(<span class="st">&quot;pow&quot;</span>, <span class="kw">environment</span>(square))</a></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw">ls</span>(<span class="kw">environment</span>(cube))</a></code></pre></div>
<pre><code>## [1] &quot;pow&quot;</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="kw">get</span>(<span class="st">&quot;pow&quot;</span>, <span class="kw">environment</span>(cube))</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="kw">search</span>()</a></code></pre></div>
<pre><code>##  [1] &quot;.GlobalEnv&quot;             &quot;package:shiny&quot;          &quot;package:methods&quot;       
##  [4] &quot;package:Rcpp&quot;           &quot;package:profvis&quot;        &quot;package:plotly&quot;        
##  [7] &quot;package:microbenchmark&quot; &quot;package:ggplot2&quot;        &quot;package:fortunes&quot;      
## [10] &quot;package:dplyr&quot;          &quot;package:data.table&quot;     &quot;package:bookdown&quot;      
## [13] &quot;package:stats&quot;          &quot;package:graphics&quot;       &quot;package:grDevices&quot;     
## [16] &quot;package:utils&quot;          &quot;package:datasets&quot;       &quot;Autoloads&quot;             
## [19] &quot;package:base&quot;</code></pre>
</section>
<section class="slide level2">

<p>Consider the following example:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb59-2" data-line-number="2">f &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb59-3" data-line-number="3">    y &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb59-4" data-line-number="4">    y <span class="op">^</span><span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="kw">g</span>(x)</a>
<a class="sourceLine" id="cb59-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb59-6" data-line-number="6">g &lt;-<span class="st"> </span><span class="cf">function</span>(x) x <span class="op">*</span><span class="st"> </span>y                <span class="co"># what is the value of `y` here?</span></a>
<a class="sourceLine" id="cb59-7" data-line-number="7"><span class="kw">f</span>(<span class="dv">3</span>)</a></code></pre></div>
<ul>
<li>Inside of the function <code>g</code>, what is the value of <code>y</code>?
<ul>
<li>lexical scoping: <code>y = 10</code></li>
<li>dynamic scoping: <code>y = 2</code> instead</li>
</ul></li>
<li>In R, the calling environment (where the function is called) is known as the parent frame.</li>
</ul>
</section>
<section id="control-structures" class="slide level2">
<h2>Control structures</h2>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">## a simple example of the if-else statement</a>
<a class="sourceLine" id="cb60-2" data-line-number="2">## for some vector variable `x`</a>
<a class="sourceLine" id="cb60-3" data-line-number="3"><span class="cf">if</span> (<span class="kw">length</span>(x) <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>) {</a>
<a class="sourceLine" id="cb60-4" data-line-number="4">    ## do something here if length of x &gt; 10</a>
<a class="sourceLine" id="cb60-5" data-line-number="5">} <span class="cf">else</span> <span class="cf">if</span> (<span class="kw">length</span>(x) <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>) {</a>
<a class="sourceLine" id="cb60-6" data-line-number="6">    ## do something else if length of x &gt; 5 but &lt;= 10</a>
<a class="sourceLine" id="cb60-7" data-line-number="7">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb60-8" data-line-number="8">    ## do something else</a>
<a class="sourceLine" id="cb60-9" data-line-number="9">}</a></code></pre></div>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1">## a simple loop that seems to be okay</a>
<a class="sourceLine" id="cb61-2" data-line-number="2">## however, it is a not necessary loop in R!</a>
<a class="sourceLine" id="cb61-3" data-line-number="3">x &lt;-<span class="st"> </span><span class="dv">0</span>; y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">9</span>)</a>
<a class="sourceLine" id="cb61-4" data-line-number="4"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) {</a>
<a class="sourceLine" id="cb61-5" data-line-number="5">    x &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y[i]</a>
<a class="sourceLine" id="cb61-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb61-7" data-line-number="7">x <span class="op">==</span><span class="st"> </span><span class="kw">sum</span>(y)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1">## see also</a>
<a class="sourceLine" id="cb63-2" data-line-number="2"><span class="cf">switch</span>(), <span class="kw">ifelse</span>(), <span class="cf">while</span>(), <span class="cf">break</span>, <span class="cf">next</span>, <span class="cf">repeat</span>(), <span class="kw">return</span>()</a></code></pre></div>
</section>
<section id="loop-helper-functions" class="slide level2">
<h2>Loop helper functions</h2>
<ul>
<li><code>apply</code> and its friends <code>lapply</code>, <code>sapply</code>, <code>tapply</code>, <code>mapply</code>, <code>vapply</code>, and more</li>
</ul>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="kw">str</span>(apply)</a></code></pre></div>
<pre><code>## function (X, MARGIN, FUN, ...)</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb66-2" data-line-number="2">mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">200</span>), <span class="dt">nrow =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb66-3" data-line-number="3"><span class="kw">apply</span>(mat, <span class="dv">1</span>, quantile, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>))</a></code></pre></div>
<pre><code>##           [,1]       [,2]       [,3]       [,4]       [,5]       [,6]      [,7]
## 25% -0.5641935 -0.3024751 -0.6244192 -0.7630466 -0.7939067 -0.5482448 -0.314301
## 75%  0.7232730  0.4018363  0.2620994  0.7028158  0.2268176  1.0520128  0.609674
##           [,8]       [,9]      [,10]
## 25% -0.7857089 -0.4379614 -0.6305012
## 75%  0.3416559  0.7605316  0.2541973</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="kw">apply</span>(mat, <span class="dv">2</span>, <span class="cf">function</span>(a) <span class="kw">max</span>(a) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(a))</a></code></pre></div>
<pre><code>##  [1] 2.980126 3.753530 2.940508 1.275597 3.434352 3.065223 3.121876 3.334740 1.519468
## [10] 3.213754 2.586939 2.225847 2.805719 3.962351 3.701645 1.985350 4.501195 3.224448
## [19] 2.326511 3.308015</code></pre>
</section>
<section class="slide level2">

<ul>
<li>also works for arrays</li>
</ul>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="kw">rnorm</span>(<span class="dv">200</span>), <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb70-2" data-line-number="2"><span class="kw">apply</span>(x, <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), mean)</a></code></pre></div>
<pre><code>##            [,1]       [,2]
## [1,]  0.4205324 -0.1052822
## [2,] -0.1114394 -0.1615257</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="kw">rowMeans</span>(x, <span class="dt">dims =</span> <span class="dv">2</span>)                <span class="co"># better performance as shown later</span></a></code></pre></div>
<pre><code>##            [,1]       [,2]
## [1,]  0.4205324 -0.1052822
## [2,] -0.1114394 -0.1615257</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="kw">apply</span>(x, <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), sum)</a></code></pre></div>
<pre><code>##           [,1]      [,2]
## [1,]  4.205324 -1.052822
## [2,] -1.114394 -1.615257</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="kw">rowSums</span>(x, <span class="dt">dims =</span> <span class="dv">2</span>)                 <span class="co"># better performance as shown later</span></a></code></pre></div>
<pre><code>##           [,1]      [,2]
## [1,]  4.205324 -1.052822
## [2,] -1.114394 -1.615257</code></pre>
</section>
<section class="slide level2">

<ul>
<li><code>lapply</code>: loops over a vector/list and apply a function to each element</li>
<li><code>sapply</code>: same with <code>lapply</code> but try to simplify the result</li>
</ul>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb78-2" data-line-number="2">(foo &lt;-<span class="st"> </span><span class="kw">lapply</span>(a, <span class="cf">function</span>(b) <span class="kw">rnorm</span>(b)))</a></code></pre></div>
<pre><code>## [[1]]
## [1] -0.07355602
## 
## [[2]]
## [1] -1.1686514 -0.6347483
## 
## [[3]]
## [1] -0.02884155  0.67069597 -1.65054654</code></pre>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1"><span class="kw">sapply</span>(foo, mean)</a></code></pre></div>
<pre><code>## [1] -0.07355602 -0.90169984 -0.33623071</code></pre>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">dat &lt;-<span class="st"> </span><span class="kw">subset</span>(iris, <span class="dt">subset =</span> Species <span class="op">%in%</span><span class="st"> </span><span class="kw">levels</span>(iris<span class="op">$</span>Species)[<span class="dv">1</span>],</a>
<a class="sourceLine" id="cb82-2" data-line-number="2">              <span class="dt">select =</span> <span class="op">-</span><span class="st"> </span>Species)</a>
<a class="sourceLine" id="cb82-3" data-line-number="3"><span class="kw">str</span>(dat)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    50 obs. of  4 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="kw">str</span>(<span class="kw">lapply</span>(dat, quantile, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>)))</a></code></pre></div>
<pre><code>## List of 4
##  $ Sepal.Length: Named num [1:2] 4.8 5.2
##   ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;25%&quot; &quot;75%&quot;
##  $ Sepal.Width : Named num [1:2] 3.2 3.68
##   ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;25%&quot; &quot;75%&quot;
##  $ Petal.Length: Named num [1:2] 1.4 1.58
##   ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;25%&quot; &quot;75%&quot;
##  $ Petal.Width : Named num [1:2] 0.2 0.3
##   ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;25%&quot; &quot;75%&quot;</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1"><span class="kw">sapply</span>(dat, quantile, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>))</a></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width Petal.Length Petal.Width
## 25%          4.8       3.200        1.400         0.2
## 75%          5.2       3.675        1.575         0.3</code></pre>
</section>
<section id="vectorization" class="slide level2">
<h2>Vectorization</h2>
<ul>
<li>Many operations and functions in R are vectorized, which makes computation more efficient, code more concise and easier to read.</li>
<li>It is recommended to take advantage of the vectorized operations and avoid unnecessary (explicit) loops in R.</li>
</ul>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>; y &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">9</span>; x <span class="op">+</span><span class="st"> </span>y               <span class="co"># x is recycled</span></a></code></pre></div>
<pre><code>## [1]  5  7  9  8 10 12</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1">x <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1"><span class="kw">pmax</span>(x, <span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] 2 2 3</code></pre>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">nrow =</span> <span class="dv">2</span>); y &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">10</span>, <span class="dv">2</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb94-2" data-line-number="2">x <span class="op">*</span><span class="st"> </span>y                                   <span class="co"># element-wise multiplication</span></a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   10   30
## [2,]   20   40</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1">x <span class="op">%*%</span><span class="st"> </span>y                                 <span class="co"># true matrix multiplication</span></a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   40   40
## [2,]   60   60</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">times =</span> <span class="dv">2</span><span class="op">:</span><span class="dv">4</span>)</a></code></pre></div>
<pre><code>## [1] 1 1 2 2 2 3 3 3 3</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" data-line-number="1"><span class="kw">rnorm</span>(<span class="dv">10</span>, <span class="dt">mean =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">sd =</span> <span class="fl">0.1</span>)         <span class="co"># mean is recycled</span></a></code></pre></div>
<pre><code>##  [1] 0.9650246 2.0756406 2.9461191 4.0227292 5.0492229 1.0267835 2.0653258 2.9877291
##  [9] 3.9586323 4.7356851</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1"><span class="kw">paste0</span>(<span class="st">&quot;No.&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)                      <span class="co"># &quot;No.&quot; is recycled</span></a></code></pre></div>
<pre><code>## [1] &quot;No.1&quot; &quot;No.2&quot; &quot;No.3&quot;</code></pre>
</section>
<section id="reading-and-writing-data" class="slide level2">
<h2>Reading and writing data</h2>
<ul>
<li>basic functions:</li>
</ul>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1"><span class="kw">read.table</span>(), <span class="kw">read.csv</span>(), ...</a>
<a class="sourceLine" id="cb104-2" data-line-number="2"><span class="kw">write.table</span>(), <span class="kw">write.csv</span>(), ...</a>
<a class="sourceLine" id="cb104-3" data-line-number="3"><span class="kw">readLines</span>(), <span class="kw">cat</span>()</a></code></pre></div>
<ul>
<li>useful packages: <strong>foreign</strong>, <strong>openxlsx</strong>, <strong>readr</strong>, <strong>haven</strong>, <strong>XLConnect</strong>, <strong>readxl</strong>, …</li>
<li>able to work with databases: <strong>RODBC</strong>, <strong>RMySQL</strong>, …</li>
<li>JSON files? <strong>jsonlite</strong>, <strong>rjson</strong>, …</li>
<li>YAML files? <strong>yaml</strong>, …</li>
<li>BibTeX files? <strong>bibtex</strong>, …</li>
<li>…</li>
</ul>
</section>
<section id="working-with-data.frame" class="slide level2">
<h2>Working with data.frame</h2>
<ul>
<li><p>Base R has a variety of useful functions for working with data.</p></li>
<li><p>two great add-on packages for working with <code>data.frame</code>: <strong>data.table</strong> and <strong>dplyr</strong></p></li>
</ul>
</section>
<section id="example-sum-aggregation-by-group" class="slide level2">
<h2>Example: Sum aggregation by group</h2>
<ul>
<li>Consider a StackOverflow question: <a href="https://stackoverflow.com/questions/1660124/how-to-sum-a-variable-by-group">How to sum a variable by group?</a></li>
<li>Suppose we have integer vector <code>x</code> representing the group.</li>
<li>We want to sum/aggregate <code>y</code> by group <code>x</code>.</li>
</ul>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb105-2" data-line-number="2">dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">rpois</span>(<span class="dv">200</span>, <span class="dt">lambda =</span> <span class="dv">5</span>),</a>
<a class="sourceLine" id="cb105-3" data-line-number="3">                  <span class="dt">y =</span> <span class="kw">round</span>(<span class="kw">runif</span>(<span class="dv">200</span>, <span class="dt">max =</span> <span class="dv">10</span>)))</a>
<a class="sourceLine" id="cb105-4" data-line-number="4"><span class="kw">str</span>(dat)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    200 obs. of  2 variables:
##  $ x: int  4 7 4 8 9 2 5 8 5 5 ...
##  $ y: num  2 10 6 5 4 9 4 3 2 2 ...</code></pre>
</section>
<section class="slide level2">

<ul>
<li>The following solutions give equivalent results in slightly different formats.</li>
</ul>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1">res_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">with</span>(dat, <span class="kw">by</span>(y, x, sum))                   <span class="co"># `base::by`</span></a>
<a class="sourceLine" id="cb107-2" data-line-number="2"></a>
<a class="sourceLine" id="cb107-3" data-line-number="3">res_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">with</span>(dat, <span class="kw">tapply</span>(y, x, sum))               <span class="co"># `base::tapply`</span></a>
<a class="sourceLine" id="cb107-4" data-line-number="4"></a>
<a class="sourceLine" id="cb107-5" data-line-number="5">res_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">aggregate</span>(y <span class="op">~</span><span class="st"> </span>x, <span class="dt">data =</span> dat, <span class="dt">FUN =</span> sum)    <span class="co"># `stats::aggregate`</span></a>
<a class="sourceLine" id="cb107-6" data-line-number="6"></a>
<a class="sourceLine" id="cb107-7" data-line-number="7">res_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw">xtabs</span>(y <span class="op">~</span><span class="st"> </span>x, <span class="dt">data =</span> dat)                   <span class="co"># `stats::xtabs`</span></a>
<a class="sourceLine" id="cb107-8" data-line-number="8"></a>
<a class="sourceLine" id="cb107-9" data-line-number="9"><span class="kw">suppressMessages</span>(<span class="kw">library</span>(plyr))                     <span class="co"># `plyr::ddply`</span></a>
<a class="sourceLine" id="cb107-10" data-line-number="10">res_<span class="dv">5</span> &lt;-<span class="st"> </span><span class="kw">ddply</span>(dat, <span class="st">&quot;x&quot;</span>, summarise, <span class="dt">sum =</span> <span class="kw">sum</span>(y))</a>
<a class="sourceLine" id="cb107-11" data-line-number="11"></a>
<a class="sourceLine" id="cb107-12" data-line-number="12"><span class="kw">suppressMessages</span>(<span class="kw">library</span>(dplyr))                    <span class="co"># dplyr package</span></a>
<a class="sourceLine" id="cb107-13" data-line-number="13">res_<span class="dv">6</span> &lt;-<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(x) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">sum =</span> <span class="kw">sum</span>(y))</a>
<a class="sourceLine" id="cb107-14" data-line-number="14"></a>
<a class="sourceLine" id="cb107-15" data-line-number="15"><span class="kw">suppressMessages</span>(<span class="kw">library</span>(data.table))               <span class="co"># data.table package</span></a>
<a class="sourceLine" id="cb107-16" data-line-number="16">dat &lt;-<span class="st"> </span><span class="kw">as.data.table</span>(dat)</a>
<a class="sourceLine" id="cb107-17" data-line-number="17">res_<span class="dv">7</span> &lt;-<span class="st"> </span>dat[, .(<span class="dt">sum =</span> <span class="kw">sum</span>(y)), keyby =<span class="st"> </span>x]</a></code></pre></div>
</section>
<section id="add-on-packages" class="slide level2">
<h2>Add-on packages</h2>
<ul>
<li><p>The package ecosystem is one of the reasons that makes R so great!</p></li>
<li><p>too many packages? check out the task view: <a href="https://cran.r-project.org/web/views/" class="uri">https://cran.r-project.org/web/views/</a></p></li>
<li>quality control? a few thing we may check from CRAN
<ul>
<li>package authors and maintainers</li>
<li>public repository for version control and bug reports</li>
<li>automated tests</li>
<li>package vignettes, documentation, NEWS/changeLog</li>
<li>reverse depends/imports/suggests</li>
<li>release history</li>
</ul></li>
</ul>
</section>
<section id="debugging-tools" class="slide level2">
<h2>Debugging tools</h2>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="kw">traceback</span>()</a>
<a class="sourceLine" id="cb108-2" data-line-number="2"><span class="kw">debug</span>(), <span class="kw">undebug</span>()</a>
<a class="sourceLine" id="cb108-3" data-line-number="3"><span class="kw">trace</span>(), <span class="kw">untrace</span>()</a>
<a class="sourceLine" id="cb108-4" data-line-number="4"><span class="kw">browser</span>(), <span class="kw">recover</span>()</a></code></pre></div>
<ul>
<li>a nice article written by Professor Roger Peng: <a href="http://www.biostat.jhsph.edu/~rpeng/docs/R-debug-tools.pdf">An Introduction to the Interactive Debugging Tools in R</a></li>
</ul>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1">foo &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb109-2" data-line-number="2">    x2 &lt;-<span class="st"> </span>x <span class="op">*</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb109-3" data-line-number="3">    <span class="kw">sum</span>(<span class="kw">log</span>(x2))</a>
<a class="sourceLine" id="cb109-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb109-5" data-line-number="5"><span class="kw">foo</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] 3.871201</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="kw">foo</span>(<span class="st">&quot;a&quot;</span>)                                <span class="co"># leads to error</span></a>
<a class="sourceLine" id="cb111-2" data-line-number="2"><span class="kw">set.seed</span>(<span class="dv">123</span>); <span class="kw">foo</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))          <span class="co"># leads to warning</span></a></code></pre></div>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1">foo &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb112-2" data-line-number="2">    x2 &lt;-<span class="st"> </span>x <span class="op">*</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb112-3" data-line-number="3">    <span class="kw">browser</span>()</a>
<a class="sourceLine" id="cb112-4" data-line-number="4">    <span class="kw">sum</span>(<span class="kw">log</span>(x2))</a>
<a class="sourceLine" id="cb112-5" data-line-number="5">}</a></code></pre></div>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb113-2" data-line-number="2">    x <span class="op">-</span><span class="st"> </span><span class="kw">g</span>(x <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb113-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb113-4" data-line-number="4">g &lt;-<span class="st"> </span><span class="cf">function</span>(y) {</a>
<a class="sourceLine" id="cb113-5" data-line-number="5">    <span class="kw">h</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>y)</a>
<a class="sourceLine" id="cb113-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb113-7" data-line-number="7">h &lt;-<span class="st"> </span><span class="cf">function</span>(z) {</a>
<a class="sourceLine" id="cb113-8" data-line-number="8">    a &lt;-<span class="st"> </span><span class="kw">log</span>(z)</a>
<a class="sourceLine" id="cb113-9" data-line-number="9">    <span class="cf">if</span> (<span class="kw">all</span>(a <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>))</a>
<a class="sourceLine" id="cb113-10" data-line-number="10">        a <span class="op">^</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb113-11" data-line-number="11">    <span class="cf">else</span></a>
<a class="sourceLine" id="cb113-12" data-line-number="12">        a</a>
<a class="sourceLine" id="cb113-13" data-line-number="13">}</a>
<a class="sourceLine" id="cb113-14" data-line-number="14"><span class="kw">f</span>(<span class="kw">rnorm</span>(<span class="dv">10</span>))          <span class="co"># Error: missing value where TRUE/FALSE needed</span></a>
<a class="sourceLine" id="cb113-15" data-line-number="15"><span class="kw">traceback</span>()</a></code></pre></div>
</section>
<section id="exception-handling" class="slide level2">
<h2>Exception handling</h2>
<ul>
<li><code>try()</code>: allows execution to continue even after an error has occurred</li>
<li><code>tryCatch()</code>: a general tool for handling conditions in addition to errors</li>
<li><code>withCallingHandlers()</code>: a variant of <code>tryCatch()</code>, rarely needed</li>
</ul>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1">bar &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb114-2" data-line-number="2">    res &lt;-<span class="st"> </span><span class="kw">tryCatch</span>(<span class="kw">as.numeric</span>(x), <span class="dt">warning =</span> <span class="cf">function</span>(w) w)</a>
<a class="sourceLine" id="cb114-3" data-line-number="3">    <span class="cf">if</span> (<span class="st">&quot;warning&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">class</span>(res)) x <span class="cf">else</span> res</a>
<a class="sourceLine" id="cb114-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb114-5" data-line-number="5"><span class="kw">str</span>(<span class="kw">bar</span>(<span class="st">&quot;123&quot;</span>))</a></code></pre></div>
<pre><code>##  num 123</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="kw">str</span>(<span class="kw">bar</span>(<span class="st">&quot;abc&quot;</span>))</a></code></pre></div>
<pre><code>##  chr &quot;abc&quot;</code></pre>
</section>
<section id="performance" class="slide level2">
<h2>Performance</h2>
<ul>
<li>Consider the following example of computing the row sum for a given matrix <code>mat</code>.</li>
</ul>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" data-line-number="1">mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">200</span>), <span class="dt">nrow =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb118-2" data-line-number="2">a &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="dt">mode =</span> <span class="st">&quot;numeric&quot;</span>, <span class="dt">length =</span> <span class="kw">nrow</span>(mat))</a>
<a class="sourceLine" id="cb118-3" data-line-number="3"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(mat)) a[i] &lt;-<span class="st"> </span><span class="kw">sum</span>(mat[i, ]) <span class="co"># 1. using a for loop</span></a>
<a class="sourceLine" id="cb118-4" data-line-number="4">a</a></code></pre></div>
<pre><code>##  [1]  7.4389886 -0.6842283  3.0934989 -1.3245809  3.6883585  3.3878318 -2.9784455
##  [8] -6.0472031  1.5152872  0.3347129</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" data-line-number="1"><span class="kw">apply</span>(mat, <span class="dv">1</span>, sum)                      <span class="co"># 2. using the apply function</span></a></code></pre></div>
<pre><code>##  [1]  7.4389886 -0.6842283  3.0934989 -1.3245809  3.6883585  3.3878318 -2.9784455
##  [8] -6.0472031  1.5152872  0.3347129</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" data-line-number="1"><span class="kw">rowSums</span>(mat)                            <span class="co"># 3. using the rowSums function</span></a></code></pre></div>
<pre><code>##  [1]  7.4389886 -0.6842283  3.0934989 -1.3245809  3.6883585  3.3878318 -2.9784455
##  [8] -6.0472031  1.5152872  0.3347129</code></pre>
</section>
<section id="benchmarking" class="slide level2">
<h2>Benchmarking</h2>
<ul>
<li><strong>microbenchmark</strong>, <strong>rbenchmark</strong>, <strong>benchmark</strong>, …</li>
</ul>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="kw">library</span>(microbenchmark)</a>
<a class="sourceLine" id="cb124-2" data-line-number="2"><span class="kw">microbenchmark</span>(</a>
<a class="sourceLine" id="cb124-3" data-line-number="3">    <span class="st">&quot;for loop&quot;</span> =<span class="st"> </span>{ a &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="dt">mode =</span> <span class="st">&quot;numeric&quot;</span>, <span class="dt">length =</span> <span class="kw">nrow</span>(mat));</a>
<a class="sourceLine" id="cb124-4" data-line-number="4">        <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(mat)) a[i] &lt;-<span class="st"> </span><span class="kw">sum</span>(mat[i, ]) },</a>
<a class="sourceLine" id="cb124-5" data-line-number="5">    <span class="st">&quot;apply&quot;</span> =<span class="st"> </span><span class="kw">apply</span>(mat, <span class="dv">1</span>, sum),</a>
<a class="sourceLine" id="cb124-6" data-line-number="6">    <span class="st">&quot;rowSums&quot;</span> =<span class="st"> </span><span class="kw">rowSums</span>(mat),</a>
<a class="sourceLine" id="cb124-7" data-line-number="7">    <span class="dt">times =</span> <span class="dv">200</span>, <span class="dt">unit =</span> <span class="st">&quot;relative&quot;</span></a>
<a class="sourceLine" id="cb124-8" data-line-number="8">)</a></code></pre></div>
<pre><code>## Unit: relative
##      expr        min       lq       mean     median        uq       max neval cld
##  for loop 509.269580 410.2903 255.181686 227.913516 202.92572 68.439475   200   b
##     apply   6.432437   5.6705   4.206034   3.298338   4.20009  1.240729   200  a 
##   rowSums   1.000000   1.0000   1.000000   1.000000   1.00000  1.000000   200  a</code></pre>
<ul>
<li>R is not a fast language compared with C/C++/Fortran. However, a lot of R code is slow simply because it is poorly written.</li>
</ul>
</section>
<section id="a-few-quick-benchmarkings" class="slide level2">
<h2>A few quick benchmarkings</h2>
<p>The R session information for benchmarking is given below.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="kw">sessionInfo</span>()</a></code></pre></div>
<pre><code>## R version 3.4.4 (2018-03-15)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Arch Linux
## 
## Matrix products: default
## BLAS: /usr/lib/libblas.so.3.8.0
## LAPACK: /usr/lib/liblapack.so.3.8.0
## 
## locale:
##  [1] LC_CTYPE=en_US.utf8       LC_NUMERIC=C              LC_TIME=en_US.utf8       
##  [4] LC_COLLATE=en_US.utf8     LC_MONETARY=en_US.utf8    LC_MESSAGES=en_US.utf8   
##  [7] LC_PAPER=en_US.utf8       LC_NAME=C                 LC_ADDRESS=C             
## [10] LC_TELEPHONE=C            LC_MEASUREMENT=en_US.utf8 LC_IDENTIFICATION=C      
## 
## attached base packages:
## [1] methods   stats     graphics  grDevices utils     datasets  base     
## 
## other attached packages:
##  [1] plyr_1.8.4           shiny_1.0.5          Rcpp_0.12.15         profvis_0.3.5       
##  [5] plotly_4.7.1         microbenchmark_1.4-4 ggplot2_2.2.1        fortunes_1.5-4      
##  [9] dplyr_0.7.4          data.table_1.10.4-3  bookdown_0.7        
## 
## loaded via a namespace (and not attached):
##  [1] revealjs_0.9      zoo_1.8-1         xfun_0.1          purrr_0.2.4      
##  [5] splines_3.4.4     lattice_0.20-35   colorspace_1.3-2  htmltools_0.3.6  
##  [9] viridisLite_0.3.0 yaml_2.1.16       survival_2.41-3   rlang_0.2.0      
## [13] pillar_1.1.0      glue_1.2.0        bindrcpp_0.2      multcomp_1.4-8   
## [17] bindr_0.1         stringr_1.3.0     munsell_0.4.3     gtable_0.2.0     
## [21] htmlwidgets_1.0   mvtnorm_1.0-7     codetools_0.2-15  evaluate_0.10.1  
## [25] knitr_1.20        httpuv_1.3.5      TH.data_1.0-8     xtable_1.8-2     
## [29] scales_0.5.0      backports_1.1.2   jsonlite_1.5      mime_0.5         
## [33] digest_0.6.15     stringi_1.1.6     grid_3.4.4        rprojroot_1.3-2  
## [37] tools_3.4.4       sandwich_2.4-0    magrittr_1.5      lazyeval_0.2.1   
## [41] tibble_1.4.2      tidyr_0.8.0       pkgconfig_2.0.1   MASS_7.3-49      
## [45] Matrix_1.2-12     assertthat_0.2.0  rmarkdown_1.8     httr_1.3.1       
## [49] R6_2.2.2          compiler_3.4.4</code></pre>
</section>
<section class="slide level2">

<ul>
<li><code>1:length(vec)</code> vs. <code>seq_along(vec)</code></li>
</ul>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" data-line-number="1">vec &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">50</span>)</a>
<a class="sourceLine" id="cb128-2" data-line-number="2"><span class="kw">stopifnot</span>(<span class="kw">all.equal</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(vec), <span class="kw">seq_along</span>(vec)))</a>
<a class="sourceLine" id="cb128-3" data-line-number="3"><span class="kw">microbenchmark</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(vec), <span class="kw">seq_along</span>(vec),</a>
<a class="sourceLine" id="cb128-4" data-line-number="4">               <span class="dt">times =</span> <span class="fl">1e3</span>, <span class="dt">unit =</span> <span class="st">&quot;relative&quot;</span>)</a></code></pre></div>
<pre><code>## Unit: relative
##            expr      min       lq     mean   median       uq      max neval cld
##   1:length(vec) 1.567742 1.649103 1.534697 1.585778 1.539155 1.074651  1000   b
##  seq_along(vec) 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000  1000  a</code></pre>
<ul>
<li><code>1:n</code> vs. <code>seq_len(n)</code></li>
</ul>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="kw">stopifnot</span>(<span class="kw">all.equal</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="kw">seq_len</span>(<span class="dv">100</span>)))</a>
<a class="sourceLine" id="cb130-2" data-line-number="2"><span class="kw">microbenchmark</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="kw">seq_len</span>(<span class="dv">100</span>), <span class="dt">times =</span> <span class="fl">1e3</span>, <span class="dt">unit =</span> <span class="st">&quot;relative&quot;</span>)</a></code></pre></div>
<pre><code>## Unit: relative
##          expr      min       lq     mean   median       uq       max neval cld
##         1:100 1.434783 1.353846 1.211488 1.272997 1.219895 0.8063325  1000   b
##  seq_len(100) 1.000000 1.000000 1.000000 1.000000 1.000000 1.0000000  1000  a</code></pre>
</section>
<section class="slide level2">

<ul>
<li><code>t(mat1) %*% mat1</code> vs. <code>crossprod(mat1)</code></li>
</ul>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1">mat1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="fl">1e4</span>), <span class="fl">1e2</span>)</a>
<a class="sourceLine" id="cb132-2" data-line-number="2"><span class="kw">stopifnot</span>(<span class="kw">all.equal</span>(mat1 <span class="op">%*%</span><span class="st"> </span><span class="kw">t</span>(mat1), <span class="kw">tcrossprod</span>(mat1)))</a>
<a class="sourceLine" id="cb132-3" data-line-number="3"><span class="kw">microbenchmark</span>(<span class="kw">t</span>(mat1) <span class="op">%*%</span><span class="st"> </span>mat1, <span class="kw">crossprod</span>(mat1), <span class="dt">unit =</span> <span class="st">&quot;relative&quot;</span>)</a></code></pre></div>
<pre><code>## Unit: relative
##              expr      min       lq     mean   median       uq      max neval cld
##  t(mat1) %*% mat1 2.068901 2.034417 2.121033 2.041875 2.194208 3.642643   100   b
##   crossprod(mat1) 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000   100  a</code></pre>
<ul>
<li><code>mat1 %*% t(mat1)</code> vs. <code>tcrossprod(mat1)</code></li>
</ul>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="kw">stopifnot</span>(<span class="kw">all.equal</span>(mat1 <span class="op">%*%</span><span class="st"> </span><span class="kw">t</span>(mat1), <span class="kw">tcrossprod</span>(mat1)))</a>
<a class="sourceLine" id="cb134-2" data-line-number="2"><span class="kw">microbenchmark</span>(mat1 <span class="op">%*%</span><span class="st"> </span><span class="kw">t</span>(mat1), <span class="kw">tcrossprod</span>(mat1), <span class="dt">unit =</span> <span class="st">&quot;relative&quot;</span>)</a></code></pre></div>
<pre><code>## Unit: relative
##              expr      min       lq     mean   median       uq      max neval cld
##  mat1 %*% t(mat1) 1.896281 1.855674 1.891234 1.879163 1.870892 3.561835   100   b
##  tcrossprod(mat1) 1.000000 1.000000 1.000000 1.000000 1.000000 1.000000   100  a</code></pre>
</section>
<section class="slide level2">

<ul>
<li><code>t(mat1) %*% mat2</code> vs. <code>crossprod(mat1, mat2)</code></li>
</ul>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" data-line-number="1">mat2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="fl">1e4</span>), <span class="fl">1e2</span>)</a>
<a class="sourceLine" id="cb136-2" data-line-number="2"><span class="kw">stopifnot</span>(<span class="kw">all.equal</span>(<span class="kw">t</span>(mat1) <span class="op">%*%</span><span class="st"> </span>mat2, <span class="kw">crossprod</span>(mat1, mat2)))</a>
<a class="sourceLine" id="cb136-3" data-line-number="3"><span class="kw">microbenchmark</span>(<span class="kw">t</span>(mat1) <span class="op">%*%</span><span class="st"> </span>mat2, <span class="kw">crossprod</span>(mat1, mat2), <span class="dt">unit =</span> <span class="st">&quot;relative&quot;</span>)</a></code></pre></div>
<pre><code>## Unit: relative
##                   expr      min       lq     mean   median       uq       max neval cld
##       t(mat1) %*% mat2 1.061678 1.085385 1.092117 1.087051 1.131448 0.5650585   100   b
##  crossprod(mat1, mat2) 1.000000 1.000000 1.000000 1.000000 1.000000 1.0000000   100  a</code></pre>
<ul>
<li><code>mat1 %*% t(mat2)</code> vs. <code>tcrossprod(mat1, mat2)</code></li>
</ul>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="kw">stopifnot</span>(<span class="kw">all.equal</span>(mat1 <span class="op">%*%</span><span class="st"> </span><span class="kw">t</span>(mat2), <span class="kw">tcrossprod</span>(mat1, mat2)))</a>
<a class="sourceLine" id="cb138-2" data-line-number="2"><span class="kw">microbenchmark</span>(mat1 <span class="op">%*%</span><span class="st"> </span><span class="kw">t</span>(mat2), <span class="kw">tcrossprod</span>(mat1, mat2), <span class="dt">unit =</span> <span class="st">&quot;relative&quot;</span>)</a></code></pre></div>
<pre><code>## Unit: relative
##                    expr      min       lq    mean   median       uq      max neval cld
##        mat1 %*% t(mat2) 1.034565 1.037275 1.05693 1.028481 1.047323 2.210879   100   b
##  tcrossprod(mat1, mat2) 1.000000 1.000000 1.00000 1.000000 1.000000 1.000000   100  a</code></pre>
</section>
<section class="slide level2">

<ul>
<li><code>any(is.na(x))</code> vs. <code>anyNA(x)</code></li>
</ul>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="fl">1e4</span>; x[<span class="fl">5e3</span>] &lt;-<span class="st"> </span><span class="ot">NaN</span>               <span class="co"># coerces x to be double</span></a>
<a class="sourceLine" id="cb140-2" data-line-number="2"><span class="kw">stopifnot</span>(<span class="kw">all.equal</span>(<span class="kw">any</span>(<span class="kw">is.na</span>(x)), <span class="kw">anyNA</span>(x)))</a>
<a class="sourceLine" id="cb140-3" data-line-number="3"><span class="kw">microbenchmark</span>(<span class="kw">any</span>(<span class="kw">is.na</span>(x)), <span class="kw">anyNA</span>(x), <span class="dt">unit =</span> <span class="st">&quot;relative&quot;</span>)</a></code></pre></div>
<pre><code>## Unit: relative
##           expr      min       lq   mean   median     uq      max neval cld
##  any(is.na(x)) 5.337361 5.371203 5.6475 5.341983 5.3265 20.68088   100   b
##       anyNA(x) 1.000000 1.000000 1.0000 1.000000 1.0000  1.00000   100  a</code></pre>
<ul>
<li><code>apply</code> vs. <code>rowSums</code> (<code>rowMeans</code>, <code>colSums</code>, <code>colMeans</code>)</li>
</ul>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1"><span class="kw">stopifnot</span>(<span class="kw">all.equal</span>(<span class="kw">apply</span>(mat1, <span class="dv">2</span>, mean), <span class="kw">colMeans</span>(mat1)))</a>
<a class="sourceLine" id="cb142-2" data-line-number="2"><span class="kw">microbenchmark</span>(<span class="kw">apply</span>(mat1, <span class="dv">2</span>, mean), <span class="kw">colMeans</span>(mat1), <span class="dt">unit =</span> <span class="st">&quot;relative&quot;</span>)</a></code></pre></div>
<pre><code>## Unit: relative
##                  expr      min      lq     mean   median       uq      max neval cld
##  apply(mat1, 2, mean) 42.90425 41.0403 31.74537 36.29913 25.37704 68.62862   100   b
##        colMeans(mat1)  1.00000  1.0000  1.00000  1.00000  1.00000  1.00000   100  a</code></pre>
</section>
<section id="revisit-the-example-of-sum-aggregation-by-group" class="slide level2">
<h2>Revisit the example of sum aggregation by group</h2>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1"><span class="kw">microbenchmark</span>(</a>
<a class="sourceLine" id="cb144-2" data-line-number="2">    <span class="st">&quot;by&quot;</span> =<span class="st"> </span><span class="kw">with</span>(dat, <span class="kw">by</span>(y, x, sum)),</a>
<a class="sourceLine" id="cb144-3" data-line-number="3">    <span class="st">&quot;tapply&quot;</span> =<span class="st"> </span><span class="kw">with</span>(dat, <span class="kw">tapply</span>(y, x, sum)),</a>
<a class="sourceLine" id="cb144-4" data-line-number="4">    <span class="st">&quot;aggregate&quot;</span> =<span class="st"> </span><span class="kw">aggregate</span>(y <span class="op">~</span><span class="st"> </span>x, <span class="dt">data =</span> dat, <span class="dt">FUN =</span> sum),</a>
<a class="sourceLine" id="cb144-5" data-line-number="5">    <span class="st">&quot;xtabs&quot;</span> =<span class="st"> </span><span class="kw">xtabs</span>(y <span class="op">~</span><span class="st"> </span>x, <span class="dt">data =</span> dat),</a>
<a class="sourceLine" id="cb144-6" data-line-number="6">    <span class="st">&quot;ddply&quot;</span> =<span class="st"> </span><span class="kw">ddply</span>(dat, <span class="st">&quot;x&quot;</span>, summarise, <span class="dt">sum =</span> <span class="kw">sum</span>(y)),</a>
<a class="sourceLine" id="cb144-7" data-line-number="7">    <span class="st">&quot;dplyr&quot;</span> =<span class="st"> </span>dat <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(x) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>(<span class="dt">sum =</span> <span class="kw">sum</span>(y)),</a>
<a class="sourceLine" id="cb144-8" data-line-number="8">    <span class="st">&quot;data.table&quot;</span> =<span class="st"> </span>dat[, .(<span class="dt">sum =</span> <span class="kw">sum</span>(y)), <span class="dt">keyby =</span> x],</a>
<a class="sourceLine" id="cb144-9" data-line-number="9">    <span class="dt">times =</span> <span class="fl">1e3</span>, <span class="dt">unit =</span> <span class="st">&quot;relative&quot;</span></a>
<a class="sourceLine" id="cb144-10" data-line-number="10">)</a></code></pre></div>
<pre><code>## Unit: relative
##        expr       min        lq      mean    median        uq       max neval   cld
##          by  3.840108  3.781034  3.462978  3.586863  3.216732  1.478090  1000  b   
##      tapply  1.000000  1.000000  1.000000  1.000000  1.000000  1.000000  1000 a    
##   aggregate  7.237326  7.210388  6.763582  7.142968  6.420644  1.914705  1000    d 
##       xtabs  5.406453  5.439945  5.182376  5.476047  4.987239  1.564497  1000   c  
##       ddply 22.748202 22.080111 20.367626 20.675366 18.096151 58.834953  1000     e
##       dplyr  5.224383  6.000011  5.971183  5.894329  5.285228 28.702014  1000   cd 
##  data.table  3.148850  3.535590  3.332793  3.579980  3.160607  1.413875  1000  b</code></pre>
</section>
<section id="profiling" class="slide level2">
<h2>Profiling</h2>
<ul>
<li>How to find the bottleneck of the code (the slowest part of your code)?</li>
<li>related packages: <strong>utils</strong>, <strong>profvis</strong>, <strong>profmem</strong>, …</li>
</ul>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1">## example of `profvis`</a>
<a class="sourceLine" id="cb146-2" data-line-number="2"><span class="cf">if</span> (<span class="kw">interactive</span>()) {</a>
<a class="sourceLine" id="cb146-3" data-line-number="3">    <span class="kw">profvis</span>({</a>
<a class="sourceLine" id="cb146-4" data-line-number="4">        dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">rnorm</span>(<span class="fl">5e4</span>),</a>
<a class="sourceLine" id="cb146-5" data-line-number="5">                          <span class="dt">y =</span> <span class="kw">rnorm</span>(<span class="fl">5e4</span>))</a>
<a class="sourceLine" id="cb146-6" data-line-number="6">        <span class="kw">plot</span>(x <span class="op">~</span><span class="st"> </span>y, <span class="dt">data =</span> dat)</a>
<a class="sourceLine" id="cb146-7" data-line-number="7">        m &lt;-<span class="st"> </span><span class="kw">lm</span>(x <span class="op">~</span><span class="st"> </span>y, <span class="dt">data =</span> dat)</a>
<a class="sourceLine" id="cb146-8" data-line-number="8">        <span class="kw">abline</span>(m, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</a>
<a class="sourceLine" id="cb146-9" data-line-number="9">    })</a>
<a class="sourceLine" id="cb146-10" data-line-number="10">}</a></code></pre></div>
</section>
<section id="integrating-r-and-other-languages" class="slide level2">
<h2>Integrating R and other languages</h2>
<ul>
<li><p>C/Fortran: <code>.Call()</code>, <code>.C</code>, <code>.Fortran</code>, <code>dyn.load()</code>, …</p></li>
<li><p>C++: <strong>inline</strong>, <strong>Rcpp</strong>, <strong>RcppArmadillo</strong>, …</p></li>
<li><p>Julia: <strong>XRJulia</strong>, <strong>JuliaCall</strong>, …</p></li>
<li><p>Python: <strong>XRPython</strong>, <strong>reticulate</strong>, …</p></li>
<li><p>MATLAB: <strong>R.matlab</strong>, …</p></li>
<li><p>…</p></li>
</ul>
</section>
<section id="sum-aggregation-by-groups-using-rcpp" class="slide level2">
<h2>Sum aggregation by groups using <strong>Rcpp</strong>?</h2>
<ul>
<li>Try a straightforward (but possibly naive) implementation in <strong>Rcpp</strong>.</li>
</ul>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" data-line-number="1"><span class="kw">library</span>(Rcpp)</a>
<a class="sourceLine" id="cb147-2" data-line-number="2"><span class="kw">sourceCpp</span>(<span class="st">&quot;src/aggregateSum.cpp&quot;</span>)     <span class="co"># available at the source repository</span></a>
<a class="sourceLine" id="cb147-3" data-line-number="3">res_<span class="dv">8</span> &lt;-<span class="st"> </span><span class="kw">with</span>(dat, <span class="kw">aggregateSum</span>(y, x))</a>
<a class="sourceLine" id="cb147-4" data-line-number="4"><span class="kw">microbenchmark</span>(</a>
<a class="sourceLine" id="cb147-5" data-line-number="5">    <span class="st">&quot;tapply&quot;</span> =<span class="st"> </span><span class="kw">with</span>(dat, <span class="kw">tapply</span>(y, x, sum)),</a>
<a class="sourceLine" id="cb147-6" data-line-number="6">    <span class="st">&quot;rcpp_wi_names&quot;</span> =<span class="st"> </span><span class="kw">with</span>(dat, <span class="kw">aggregateSum</span>(y, x)),</a>
<a class="sourceLine" id="cb147-7" data-line-number="7">    <span class="st">&quot;rcpp_wo_names&quot;</span> =<span class="st"> </span><span class="kw">with</span>(dat, <span class="kw">aggregateSum</span>(y, x, <span class="dt">addNames =</span> <span class="ot">FALSE</span>)),</a>
<a class="sourceLine" id="cb147-8" data-line-number="8">    <span class="dt">times =</span> <span class="fl">1e3</span>, <span class="dt">unit =</span> <span class="st">&quot;relative&quot;</span></a>
<a class="sourceLine" id="cb147-9" data-line-number="9">)</a></code></pre></div>
<pre><code>## Unit: relative
##           expr      min       lq     mean   median       uq      max neval cld
##         tapply 8.957147 8.799673 8.790180 8.521680 8.436642 51.66355  1000   c
##  rcpp_wi_names 3.540774 3.444513 3.487307 3.346194 3.286836 30.28195  1000  b 
##  rcpp_wo_names 1.000000 1.000000 1.000000 1.000000 1.000000  1.00000  1000 a</code></pre>
</section>
<section id="parallel-computing" class="slide level2">
<h2>Parallel computing</h2>
<ul>
<li>One R session/process normally uses only one core.</li>
<li>If the computing tasks are independent and can be run individually, we may want to run them using different cores at the same time.
<ul>
<li>e.g., fitting models over 1,000 simulated datasets</li>
</ul></li>
<li>Some packages: <strong>parallel</strong>, <strong>snow</strong>, <strong>snowfall</strong>, <strong>foreach</strong>, …</li>
<li>See more at the <a href="https://cran.r-project.org/view=HighPerformanceComputing">CRAN task view</a> on high-performance and parallel computing.</li>
<li>Run R script with input arguments in terminal with GNU parallel? Or just use the HPC cluster if available?</li>
</ul>
</section>
<section id="graphics-in-r" class="slide level2">
<h2>Graphics in R</h2>
<ul>
<li>two basic graphics systems in R
<ul>
<li>base graphics (the <strong>graphics</strong> package)</li>
<li>grid graphics (the <strong>grid</strong> package)</li>
</ul></li>
<li><strong>lattice</strong>: Trellis Graphics for R
<ul>
<li>sub-plots conditional on categorical variables</li>
<li>one of the recommended packages shipped with R</li>
</ul></li>
<li><strong>ggplot2</strong>: An R implementation of Leland Wilkinson’s <em>Grammar of Graphics</em>
<ul>
<li>nice abstraction of graphics layers</li>
<li><a href="http://ggplot2.tidyverse.org" class="uri">http://ggplot2.tidyverse.org</a></li>
</ul></li>
<li>interactive plots? <strong>plotly</strong>, <strong>highcharter</strong>, <strong>Dygraphs</strong>, …</li>
<li>See more at the <a href="https://CRAN.R-project.org/view=Graphics">CRAN task view</a> on graphics.</li>
</ul>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" data-line-number="1">## a simple example of using base plotting system</a>
<a class="sourceLine" id="cb149-2" data-line-number="2"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">mgp =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>), <span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="fl">0.1</span>))</a>
<a class="sourceLine" id="cb149-3" data-line-number="3">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">22</span>; <span class="kw">plot</span>(x, <span class="dt">pch =</span> x, <span class="dt">col =</span> x, <span class="dt">cex =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb149-4" data-line-number="4"><span class="kw">abline</span>(<span class="dt">a =</span> <span class="dv">0</span>, <span class="dt">b =</span> <span class="dv">1</span>, <span class="dt">lty =</span> <span class="dv">3</span>, <span class="dt">col =</span> <span class="st">&quot;#64C7C9&quot;</span>)</a>
<a class="sourceLine" id="cb149-5" data-line-number="5"><span class="kw">abline</span>(<span class="dt">h =</span> <span class="dv">21</span>, <span class="dt">col =</span> <span class="st">&quot;#BDC0C3&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb149-6" data-line-number="6"><span class="kw">hist</span>(<span class="kw">rnorm</span>(<span class="dv">200</span>), <span class="dt">breaks =</span> <span class="dv">30</span>, <span class="dt">col =</span> <span class="st">&quot;#85B3CC&quot;</span>, <span class="dt">freq =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p><img data-src="index_files/figure-revealjs/base-graphics-examples-1.png" /><!-- --></p>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1">## example boxplots of using ggplot2</a>
<a class="sourceLine" id="cb150-2" data-line-number="2"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb150-3" data-line-number="3">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(class, hwy))</a>
<a class="sourceLine" id="cb150-4" data-line-number="4">(p1 &lt;-<span class="st"> </span>p <span class="op">+</span><span class="st"> </span><span class="kw">geom_boxplot</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> drv)))</a></code></pre></div>
<p><img data-src="index_files/figure-revealjs/ggplot2-example-1-1.png" /><!-- --></p>
</section>
<section class="slide level2">

<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" data-line-number="1">## flip the coordinate and use the classic dark-on-light theme</a>
<a class="sourceLine" id="cb151-2" data-line-number="2">p1 <span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img data-src="index_files/figure-revealjs/ggplot2-example-2-1.png" /><!-- --></p>
</section>
<section id="r-markdown" class="slide level2">
<h2>R Markdown</h2>
<ul>
<li>code + narratives = report</li>
<li>some existing tools:
<ul>
<li>WEB (Donald Knuth, Literate Programming)</li>
<li>Noweb (Norman Ramsey)</li>
<li>Sweave (Friedrich Leisch and R-core)</li>
<li><strong>knitr</strong> (Yihui Xie)</li>
<li>Org mode (Carsten Dominik, Emacs)</li>
<li>Jupyter notebook</li>
</ul></li>
<li><strong>knitr</strong>:
<ul>
<li><code>.Rnw</code> (R + LaTeX)</li>
<li><code>.Rmd</code> (R + Markdown)</li>
<li>any computing language + any authoring language</li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>R Markdown (<strong>rmarkdown</strong>): <a href="http://rmarkdown.rstudio.com" class="uri">http://rmarkdown.rstudio.com</a>
<ul>
<li><a href="http://rmarkdown.rstudio.com/gallery.html">gallery</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf">cheatsheet</a></li>
</ul></li>
<li><strong>bookdown</strong>: <a href="https://bookdown.org" class="uri">https://bookdown.org</a></li>
<li>examples:
<ul>
<li>these slides</li>
<li>a <a href="https://github.com/statds/dslab-templates">project template</a> written in R Markdown and <strong>bookdown</strong> for <a href="http://statds.org">Data Science Lab at UConn</a></li>
<li>learn from the other cool kids! <a href="http://yihui.name/knitr/demo/showcase/" class="uri">http://yihui.name/knitr/demo/showcase/</a></li>
</ul></li>
</ul>
</section>
<section id="trend-of-vertical-difference" class="slide level2">
<h2>Trend of vertical difference?</h2>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="fl">0.1</span>, <span class="dv">10</span>, <span class="fl">0.1</span>)</a>
<a class="sourceLine" id="cb152-2" data-line-number="2"><span class="kw">plot</span>(x, <span class="dv">1</span><span class="op">/</span>x, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb152-3" data-line-number="3"><span class="kw">lines</span>(x, <span class="dv">1</span><span class="op">/</span>x <span class="op">+</span><span class="st"> </span><span class="dv">2</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img data-src="index_files/figure-revealjs/vertical-diff-1.png" /><!-- --></p>
</section>
<section id="use-the-source-luke" class="slide level2">
<h2>“Use the source, Luke!”</h2>
<ul>
<li><a href="https://stat.ethz.ch/Teaching/maechler/R/useR_2014/Maechler-2014-pr.pdf">Good Practices in R Programming</a> by Martin Mächler</li>
</ul>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" data-line-number="1"><span class="kw">library</span>(fortunes)</a>
<a class="sourceLine" id="cb153-2" data-line-number="2"><span class="kw">fortune</span>(<span class="dv">250</span>)</a></code></pre></div>
<pre><code>## 
## As Obi-Wan Kenobi may have said in Star Wars: &quot;Use the source, Luke!&quot;
##    -- Barry Rowlingson (answering a question on the documentation of some implementation
##       details)
##       R-devel (January 2010)</code></pre>
<ul>
<li>from the ESS manual:</li>
</ul>
<blockquote>
<p>The source code is real. The objects are realizations of the source code.</p>
</blockquote>
</section>
<section id="r-shiny-applications" class="slide level2">
<h2>R Shiny applications</h2>
<ul>
<li><strong>Shiny</strong>: an R package that makes it easy to build interactive web apps straight from R
<ul>
<li>online tutorial available at <a href="http://shiny.rstudio.com" class="uri">http://shiny.rstudio.com</a></li>
<li>a collection of <a href="https://github.com/rstudio/shiny-examples/">nice examples</a></li>
<li><a href="http://shiny.rstudio.com/gallery/">gallery</a></li>
<li><a href="http://shiny.rstudio.com/images/shiny-cheatsheet.pdf">cheatsheet</a></li>
</ul></li>
</ul>
<ul>
<li class="fragment">I saw this cool plate at (UConn) Y lot in last Summer! <br/><img src="www/imgs/IMG_20170812_142318.jpg" width=350 /></li>
</ul>
</section>
<section id="the-hello-shiny-example" class="slide level2">
<h2>The “Hello Shiny!” example</h2>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;shiny&quot;</span>)</a>
<a class="sourceLine" id="cb155-2" data-line-number="2">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb155-3" data-line-number="3">    <span class="kw">titlePanel</span>(<span class="st">&quot;Hello Shiny!&quot;</span>),</a>
<a class="sourceLine" id="cb155-4" data-line-number="4">    <span class="kw">sidebarLayout</span>(</a>
<a class="sourceLine" id="cb155-5" data-line-number="5">        <span class="kw">sidebarPanel</span>(<span class="kw">sliderInput</span>(<span class="st">&quot;bins&quot;</span>, <span class="st">&quot;Number of bins:&quot;</span>,</a>
<a class="sourceLine" id="cb155-6" data-line-number="6">                                 <span class="dt">min =</span> <span class="dv">1</span>, <span class="dt">max =</span> <span class="dv">50</span>, <span class="dt">value =</span> <span class="dv">30</span>)),</a>
<a class="sourceLine" id="cb155-7" data-line-number="7">        <span class="kw">mainPanel</span>(<span class="kw">plotOutput</span>(<span class="st">&quot;distPlot&quot;</span>))</a>
<a class="sourceLine" id="cb155-8" data-line-number="8">    )</a>
<a class="sourceLine" id="cb155-9" data-line-number="9">)</a>
<a class="sourceLine" id="cb155-10" data-line-number="10">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output) {</a>
<a class="sourceLine" id="cb155-11" data-line-number="11">    output<span class="op">$</span>distPlot =<span class="st"> </span><span class="kw">renderPlot</span>({</a>
<a class="sourceLine" id="cb155-12" data-line-number="12">        x =<span class="st"> </span>faithful[, <span class="dv">2</span>]</a>
<a class="sourceLine" id="cb155-13" data-line-number="13">        bins =<span class="st"> </span><span class="kw">seq</span>(<span class="kw">min</span>(x), <span class="kw">max</span>(x), <span class="dt">length.out =</span> input<span class="op">$</span>bins <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb155-14" data-line-number="14">        <span class="kw">hist</span>(x, <span class="dt">breaks =</span> bins, <span class="dt">col =</span> <span class="st">&#39;darkgray&#39;</span>, <span class="dt">border =</span> <span class="st">&#39;white&#39;</span>)</a>
<a class="sourceLine" id="cb155-15" data-line-number="15">    })</a>
<a class="sourceLine" id="cb155-16" data-line-number="16">}</a>
<a class="sourceLine" id="cb155-17" data-line-number="17"><span class="kw">shinyApp</span>(<span class="dt">ui =</span> ui, <span class="dt">server =</span> server)</a></code></pre></div>
</section>
<section id="a-simple-miniui-example" class="slide level2">
<h2>A simple miniUI example</h2>
<iframe src="https://wenjie-stat.shinyapps.io/minisplines2/?showcase=0" width="100%" height="500px">
</iframe>
<ul>
<li>source available at <a href="https://github.com/wenjie2wang/wenjie-stat.shinyapps/blob/master/miniSplines2/app.R">here</a></li>
</ul>
</section>
<section id="some-reference-and-further-reading" class="slide level2">
<h2>Some reference and further reading</h2>
<ul>
<li>slides for part II: <a href="https://wenjie-stat.me/2018-04-06-siam/">wenjie-stat.me/2018-04-06-siam/</a></li>
<li><a href="https://bookdown.org/rdpeng/rprogdatascience/"><em>R Programming for Data Science</em></a> by Roger D. Peng</li>
<li><a href="http://r4ds.had.co.nz/"><em>R for Data Science</em></a> by Garrett Grolemund, and Hadley Wickham</li>
<li><a href="http://adv-r.had.co.nz"><em>Advanced R</em></a> by Hadley Wickham</li>
<li><a href="https://github.com/yihui/knitr-book"><em>Dynamic documents with R and knitr</em></a> by Yihui Xie</li>
<li><a href="http://www.springer.com/us/book/9780387759357"><em>Software for Data Analysis: Programming with R</em></a> by John Chambers</li>
<li><a href="http://www.springer.com/series/6991">Use R!</a> series at Springer</li>
<li><a href="http://shop.oreilly.com/product/0636920022008.do"><em>R in a Nutshell</em></a> by Joseph Adler</li>
<li><a href="https://www.rstudio.com/resources/cheatsheets/">Rstudio Cheatsheets</a></li>
</ul>
</section>
<section id="thanks-and-happy-coding" class="slide level2">
<h2>Thanks and happy coding!</h2>
<ul>
<li><a href="https://wenjie-stat.me" class="uri">https://wenjie-stat.me</a></li>
<li><a href="https://github.com/wenjie2wang/" class="uri">https://github.com/wenjie2wang/</a></li>
<li><a href="mailto:wenjie.2.wang@uconn.edu">wenjie.2.wang@uconn.edu</a></li>
</ul>
</section>
    </div>
  </div>

  <script src="index_files/reveal.js-3.3.0.1/lib/js/head.min.js"></script>
  <script src="index_files/reveal.js-3.3.0.1/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: false,
        // Display the page number of the current slide
        slideNumber: 'c/t',
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: false,
        // Opens links in an iframe preview overlay
        previewLinks: false,
        // Transition style
        transition: 'none', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom



        // Optional reveal.js plugins
        dependencies: [
        ]
      });
    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>

<script src="www/js/highlight_comments.js"></script>

  </body>
</html>
